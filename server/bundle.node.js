!function(e){var n={};function I(t){if(n[t])return n[t].exports;var c=n[t]={i:t,l:!1,exports:{}};return e[t].call(c.exports,c,c.exports,I),c.l=!0,c.exports}I.m=e,I.c=n,I.d=function(e,n,t){I.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},I.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},I.t=function(e,n){if(1&n&&(e=I(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(I.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var c in e)I.d(t,c,function(n){return e[n]}.bind(null,c));return t},I.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return I.d(n,"a",n),n},I.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},I.p="E:\\gitStore\\remoteController",I(I.s=6)}([function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nvar _StorageRegister = __webpack_require__(16);\n\nvar _StorageRegister2 = _interopRequireDefault(_StorageRegister);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar storage = {\n    clients: {},\n    namesMap: [],\n    remoteChanelMap: [],\n    opcode: 0\n}; /**\r\n    * Created by Andy on 2017/11/7.\r\n    */\nexports.default = new _StorageRegister2.default(storage);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zZXJ2ZXIvc29ja2V0L3NlcnZpY2VzL3NvY2tldC5zdG9yYWdlL3NvY2tldFN0b3JhZ2UuanM/MzRiOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5IG9uIDIwMTcvMTEvNy5cclxuICovXHJcbmltcG9ydCBTdG9yYWdlUmVnaXN0ZXIgZnJvbSBcIlN0b3JhZ2VSZWdpc3RlclwiO1xyXG5sZXQgc3RvcmFnZSA9IHtcclxuICAgIGNsaWVudHM6IHt9LFxyXG4gICAgbmFtZXNNYXA6IFtdLFxyXG4gICAgcmVtb3RlQ2hhbmVsTWFwOiBbXSxcclxuICAgIG9wY29kZTogMFxyXG59O1xyXG5leHBvcnQgZGVmYXVsdCBuZXcgU3RvcmFnZVJlZ2lzdGVyKHN0b3JhZ2UpO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUdBO0FBQ0E7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBOzs7QUFNQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (status, emitData, socket) {\n\n    var opcode = _socketStorage2.default.getStorage("opcode");\n\n    var emitProtocolMap = {\n        "status": status,\n        "serverData": emitData,\n\n        // 谁发上来的数据，就返回给谁，其他用户一律返回null\n        "clientData": emitData.clientData && emitData.clientData.uid === socket.uid ? emitData.clientData : null\n    };\n    console.log("emitProtocolMap:", emitProtocolMap);\n    var PayloadData = opcode == 1 ? JSON.stringify(emitProtocolMap) : new Buffer(JSON.stringify(emitProtocolMap));\n\n    if (socket.uid && socket.writable) socket.write(_exports2.default.frameEncode({\n        FIN: 1,\n        Opcode: opcode,\n        PayloadData: PayloadData\n    }));\n};\n\nvar _exports = __webpack_require__(5);\n\nvar _exports2 = _interopRequireDefault(_exports);\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zZXJ2ZXIvc29ja2V0L2VtaXR0ZXIvZW1pdHRlci5qcz8wMWYxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkgb24gMjAxNy8zLzIzLlxyXG4gKi9cclxuXHJcbmltcG9ydCB0b29sIGZyb20gXCIuLi9zZXJ2aWNlcy90b29sL2V4cG9ydHMuanNcIjtcclxuaW1wb3J0IFRSIGZyb20gXCJ3c1NlcnZlci9zZXJ2aWNlcy9zb2NrZXQuc3RvcmFnZS9zb2NrZXRTdG9yYWdlXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoc3RhdHVzLCBlbWl0RGF0YSwgc29ja2V0KSB7XHJcblxyXG4gICAgbGV0IG9wY29kZSA9IFRSLmdldFN0b3JhZ2UoXCJvcGNvZGVcIik7XHJcblxyXG4gICAgbGV0IGVtaXRQcm90b2NvbE1hcCA9IHtcclxuICAgICAgICBcInN0YXR1c1wiOiBzdGF0dXMsXHJcbiAgICAgICAgXCJzZXJ2ZXJEYXRhXCI6IGVtaXREYXRhLFxyXG5cclxuICAgICAgICAvLyDosIHlj5HkuIrmnaXnmoTmlbDmja7vvIzlsLHov5Tlm57nu5nosIHvvIzlhbbku5bnlKjmiLfkuIDlvovov5Tlm55udWxsXHJcbiAgICAgICAgXCJjbGllbnREYXRhXCI6IGVtaXREYXRhLmNsaWVudERhdGEgJiYgZW1pdERhdGEuY2xpZW50RGF0YS51aWQgPT09IHNvY2tldC51aWQgPyBlbWl0RGF0YS5jbGllbnREYXRhIDogbnVsbFxyXG4gICAgfTtcclxuICAgIGNvbnNvbGUubG9nKFwiZW1pdFByb3RvY29sTWFwOlwiLCBlbWl0UHJvdG9jb2xNYXApO1xyXG4gICAgbGV0IFBheWxvYWREYXRhID0gb3Bjb2RlID09IDEgPyBKU09OLnN0cmluZ2lmeShlbWl0UHJvdG9jb2xNYXApIDogbmV3IEJ1ZmZlcihKU09OLnN0cmluZ2lmeShlbWl0UHJvdG9jb2xNYXApKTtcclxuXHJcbiAgICBpZihzb2NrZXQudWlkICYmIHNvY2tldC53cml0YWJsZSlcclxuICAgICAgICBzb2NrZXQud3JpdGUoXHJcbiAgICAgICAgICAgIHRvb2wuZnJhbWVFbmNvZGUoe1xyXG4gICAgICAgICAgICAgICAgRklOOiAxLFxyXG4gICAgICAgICAgICAgICAgT3Bjb2RlOiBvcGNvZGUsXHJcbiAgICAgICAgICAgICAgICBQYXlsb2FkRGF0YTogUGF5bG9hZERhdGFcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICApO1xyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUExQkE7QUFDQTs7O0FBQUE7QUFDQTs7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///1\n')},function(module,exports){eval('module.exports = require("path");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcInBhdGhcIj83NGJiIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInBhdGhcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n')},function(module,exports,__webpack_require__){"use strict";eval('/* WEBPACK VAR INJECTION */(function(__dirname) {\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nvar _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar fs = __webpack_require__(4);\nvar path = __webpack_require__(2);\nexports.default = new (function () {\n    function Log() {\n        _classCallCheck(this, Log);\n    }\n\n    _createClass(Log, [{\n        key: "data",\n        value: function data(_data) {\n            _data = Log.queryMsg(_data);\n            var timer = Log.getTimer();\n            var fileName = Log.createFileName("data");\n            var content = "\\u3010" + timer + "\\u3011\\r\\n" + _data + "\\r\\n";\n            this.writeFile("data", fileName, content);\n        }\n    }, {\n        key: "error",\n        value: function error(msg) {\n            msg = Log.queryMsg(msg);\n            var timer = Log.getTimer();\n            var fileName = Log.createFileName("error");\n            var content = "\\u3010" + timer + "\\u3011\\r\\n" + msg + "\\r\\n";\n            console.log(content);\n            this.writeFile("error", fileName, content);\n        }\n    }, {\n        key: "user",\n        value: function user(id, ip) {\n            id = Log.queryMsg(id);\n            ip = Log.queryMsg(ip);\n            var timer = Log.getTimer();\n            var fileName = Log.createFileName("user");\n            var content = "\\u3010" + timer + "\\u3011\\r\\n" + ip + " " + id + "\\r\\n";\n            this.writeFile("user", fileName, content);\n        }\n    }, {\n        key: "writeFile",\n        value: function writeFile(type, filePath, content) {\n\n            var mkdir = new Promise(function (resolve, reject) {\n                fs.readdir(path.join(__dirname, type), function (err, fileGroup) {\n                    if (fileGroup instanceof Array) resolve();else reject();\n                });\n            });\n\n            mkdir.then(function () {\n                fs.appendFile(filePath, content, "utf8");\n            }, function () {\n                fs.mkdir(path.join(__dirname, type), function () {\n                    fs.appendFile(filePath, content, "utf8");\n                });\n            });\n        }\n    }], [{\n        key: "queryMsg",\n        value: function queryMsg(msg) {\n            if ((typeof msg === "undefined" ? "undefined" : _typeof(msg)) === "object") {\n                try {\n                    msg = JSON.stringify(msg);\n                } catch (error) {\n\n                    msg = error.message + "\\r\\n" + error.stack;\n                }\n            }\n\n            return msg;\n        }\n    }, {\n        key: "getTimer",\n        value: function getTimer() {\n            var now = new Date();\n            var h = now.getHours().toString(); //时\n            var m = now.getMinutes().toString(); //分\n            var s = now.getSeconds().toString(); //秒\n            h = h.length < 2 ? 0 + h : h;\n            m = m.length < 2 ? 0 + m : m;\n            s = s.length < 2 ? 0 + s : s;\n            return h + ":" + m + ":" + s;\n        }\n    }, {\n        key: "createFileName",\n        value: function createFileName(type) {\n            var now = new Date();\n\n            var y = now.getFullYear();\n            var m = now.getMonth();\n            var d = now.getDay();\n\n            return path.resolve(__dirname.split("\\\\").join("/"), type, y + "." + m + "." + d + ".log");\n        }\n    }]);\n\n    return Log;\n}())();\n/* WEBPACK VAR INJECTION */}.call(this, "server\\\\log"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zZXJ2ZXIvbG9nL21haW4uanM/NTFmNyJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY29uc3QgZnMgPSByZXF1aXJlKFwiZnNcIik7XHJcbmNvbnN0IHBhdGggPSByZXF1aXJlKFwicGF0aFwiKTtcclxuZXhwb3J0IGRlZmF1bHQgbmV3IGNsYXNzIExvZyB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICBkYXRhKGRhdGEpe1xyXG4gICAgICAgIGRhdGEgPSBMb2cucXVlcnlNc2coZGF0YSk7XHJcbiAgICAgICAgbGV0IHRpbWVyID0gTG9nLmdldFRpbWVyKCk7XHJcbiAgICAgICAgbGV0IGZpbGVOYW1lID0gTG9nLmNyZWF0ZUZpbGVOYW1lKFwiZGF0YVwiKTtcclxuICAgICAgICBsZXQgY29udGVudCA9IGDjgJAke3RpbWVyfeOAkVxcclxcbiR7ZGF0YX1cXHJcXG5gO1xyXG4gICAgICAgIHRoaXMud3JpdGVGaWxlKFwiZGF0YVwiLCBmaWxlTmFtZSwgY29udGVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgZXJyb3IobXNnKSB7XHJcbiAgICAgICAgbXNnID0gTG9nLnF1ZXJ5TXNnKG1zZyk7XHJcbiAgICAgICAgbGV0IHRpbWVyID0gTG9nLmdldFRpbWVyKCk7XHJcbiAgICAgICAgbGV0IGZpbGVOYW1lID0gTG9nLmNyZWF0ZUZpbGVOYW1lKFwiZXJyb3JcIik7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBg44CQJHt0aW1lcn3jgJFcXHJcXG4ke21zZ31cXHJcXG5gO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGNvbnRlbnQpO1xyXG4gICAgICAgIHRoaXMud3JpdGVGaWxlKFwiZXJyb3JcIiwgZmlsZU5hbWUsIGNvbnRlbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHVzZXIoaWQsIGlwKSB7XHJcbiAgICAgICAgaWQgPSBMb2cucXVlcnlNc2coaWQpO1xyXG4gICAgICAgIGlwID0gTG9nLnF1ZXJ5TXNnKGlwKTtcclxuICAgICAgICBsZXQgdGltZXIgPSBMb2cuZ2V0VGltZXIoKTtcclxuICAgICAgICBsZXQgZmlsZU5hbWUgPSBMb2cuY3JlYXRlRmlsZU5hbWUoXCJ1c2VyXCIpO1xyXG4gICAgICAgIGxldCBjb250ZW50ID0gYOOAkCR7dGltZXJ944CRXFxyXFxuJHtpcH0gJHtpZH1cXHJcXG5gO1xyXG4gICAgICAgIHRoaXMud3JpdGVGaWxlKFwidXNlclwiLCBmaWxlTmFtZSwgY29udGVudClcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgcXVlcnlNc2cobXNnKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBtc2cgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIG1zZyA9IEpTT04uc3RyaW5naWZ5KG1zZyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgbXNnID0gYCR7ZXJyb3IubWVzc2FnZX1cXHJcXG4ke2Vycm9yLnN0YWNrfWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtc2c7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldFRpbWVyKCkge1xyXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgbGV0IGggPSBub3cuZ2V0SG91cnMoKS50b1N0cmluZygpOyAgLy/ml7ZcclxuICAgICAgICBsZXQgbSA9IG5vdy5nZXRNaW51dGVzKCkudG9TdHJpbmcoKTsgIC8v5YiGXHJcbiAgICAgICAgbGV0IHMgPSBub3cuZ2V0U2Vjb25kcygpLnRvU3RyaW5nKCk7ICAvL+enklxyXG4gICAgICAgIGggPSBoLmxlbmd0aCA8IDIgPyAwICsgaCA6IGg7XHJcbiAgICAgICAgbSA9IG0ubGVuZ3RoIDwgMiA/IDAgKyBtIDogbTtcclxuICAgICAgICBzID0gcy5sZW5ndGggPCAyID8gMCArIHMgOiBzO1xyXG4gICAgICAgIHJldHVybiBgJHtofToke219OiR7c31gO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBjcmVhdGVGaWxlTmFtZSh0eXBlKSB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuXHJcbiAgICAgICAgbGV0IHkgPSBub3cuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICBsZXQgbSA9IG5vdy5nZXRNb250aCgpO1xyXG4gICAgICAgIGxldCBkID0gbm93LmdldERheSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gcGF0aC5yZXNvbHZlKF9fZGlybmFtZS5zcGxpdChcIlxcXFxcIikuam9pbihcIi9cIiksIHR5cGUsIGAke3l9LiR7bX0uJHtkfS5sb2dgKTtcclxuICAgIH1cclxuXHJcbiAgICB3cml0ZUZpbGUodHlwZSwgZmlsZVBhdGgsIGNvbnRlbnQpIHsgICAgICAgIFxyXG5cclxuICAgICAgICBsZXQgbWtkaXIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGZzLnJlYWRkaXIocGF0aC5qb2luKF9fZGlybmFtZSwgdHlwZSksIGZ1bmN0aW9uIChlcnIsIGZpbGVHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGVHcm91cCBpbnN0YW5jZW9mIEFycmF5KSByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIHJlamVjdCgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBta2RpclxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlKGZpbGVQYXRoLCBjb250ZW50LCBcInV0ZjhcIik7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGZzLm1rZGlyKHBhdGguam9pbihfX2Rpcm5hbWUsIHR5cGUpLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZShmaWxlUGF0aCwgY29udGVudCwgXCJ1dGY4XCIpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcblxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUxBO0FBQUE7QUFBQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpBO0FBQUE7QUFBQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBckJBO0FBQUE7QUFBQTtBQXdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlCQTtBQUFBO0FBQUE7QUFDQTtBQW1FQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBcEZBO0FBQUE7QUFBQTtBQWlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBM0NBO0FBQUE7QUFBQTtBQThDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0REE7QUFBQTtBQUFBO0FBeURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoRUE7QUFDQTtBQURBO0FBQUE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n')},function(module,exports){eval('module.exports = require("fs");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImZzXCI/YTQwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJmc1wiKTsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nvar _path = __webpack_require__(2);\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _frameEncode = __webpack_require__(13);\n\nvar _frameEncode2 = _interopRequireDefault(_frameEncode);\n\nvar _frameDecode = __webpack_require__(14);\n\nvar _frameDecode2 = _interopRequireDefault(_frameDecode);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } } /**\r\n                                                                                                                                                           * Created by Andy on 2017/3/14.\r\n                                                                                                                                                           */\n\nfunction add(target, name, file) {\n    target.prototype[name] = file;\n}\n//@add(Tool,"frameEncode", frameEncode);\n//@add(Tool,"frameDecode", frameDecode);\n\nvar Tool = function Tool() {\n    _classCallCheck(this, Tool);\n};\n\nadd(Tool, "frameEncode", _frameEncode2.default);\nadd(Tool, "frameDecode", _frameDecode2.default);\nexports.default = new Tool();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zZXJ2ZXIvc29ja2V0L3NlcnZpY2VzL3Rvb2wvZXhwb3J0cy5qcz85YjA5Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkgb24gMjAxNy8zLzE0LlxyXG4gKi9cclxuXHJcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XHJcbmltcG9ydCBmcmFtZUVuY29kZSBmcm9tIFwiLi9wYXlsb2FkLmNvbXBpbGVyL2ZyYW1lRW5jb2RlXCI7XHJcbmltcG9ydCBmcmFtZURlY29kZSBmcm9tIFwiLi9wYXlsb2FkLmNvbXBpbGVyL2ZyYW1lRGVjb2RlXCI7XHJcblxyXG5mdW5jdGlvbiBhZGQodGFyZ2V0LCBuYW1lLCBmaWxlKSB7XHJcbiAgICB0YXJnZXQucHJvdG90eXBlW25hbWVdID0gZmlsZTtcclxufVxyXG4vL0BhZGQoVG9vbCxcImZyYW1lRW5jb2RlXCIsIGZyYW1lRW5jb2RlKTtcclxuLy9AYWRkKFRvb2wsXCJmcmFtZURlY29kZVwiLCBmcmFtZURlY29kZSk7XHJcbmNsYXNzIFRvb2wge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcbn1cclxuXHJcbmFkZChUb29sLCBcImZyYW1lRW5jb2RlXCIsIGZyYW1lRW5jb2RlKTtcclxuYWRkKFRvb2wsIFwiZnJhbWVEZWNvZGVcIiwgZnJhbWVEZWNvZGUpO1xyXG5leHBvcnQgZGVmYXVsdCBuZXcgVG9vbCgpO1xyXG5cclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBSUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFQQTs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n')},function(module,exports,__webpack_require__){"use strict";eval('/* WEBPACK VAR INJECTION */(function(__dirname) {\n\nvar _path = __webpack_require__(2);\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _open = __webpack_require__(7);\n\nvar _open2 = _interopRequireDefault(_open);\n\nvar _open3 = __webpack_require__(11);\n\nvar _open4 = _interopRequireDefault(_open3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nglobal.ROOT_DIS = _path2.default.resolve(__dirname, "../"); /**\r\n                                                             * Created by Andy on 2017/12/2.\r\n                                                             */\n\n\nconsole.log(global.ROOT_DIS);\nglobal.SOURCES_DIS = _path2.default.resolve(__dirname, "../client/src");\nglobal.ASSETS_DIS = _path2.default.resolve(__dirname, "../client/src/assets");\nconsole.log(global.CLIENT_DIS);\nglobal.SERVER_DIS = _path2.default.resolve(__dirname);\nconsole.log(global.SERVER_DIS);\nglobal.DB_DIS = _path2.default.resolve(global.SERVER_DIS, "database/json");\nconsole.log(global.DB_DIS);\n\nnew _open2.default().open(1110);\n\n(0, _open4.default)(1111);\n/* WEBPACK VAR INJECTION */}.call(this, "server"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zZXJ2ZXIvaW5kZXguanM/NGIxZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5IG9uIDIwMTcvMTIvMi5cclxuICovXHJcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XHJcbmdsb2JhbC5ST09UX0RJUyA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsXCIuLi9cIik7XHJcblxyXG5jb25zb2xlLmxvZyhnbG9iYWwuUk9PVF9ESVMpO1xyXG5nbG9iYWwuU09VUkNFU19ESVMgPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLFwiLi4vY2xpZW50L3NyY1wiKTtcclxuZ2xvYmFsLkFTU0VUU19ESVMgPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLFwiLi4vY2xpZW50L3NyYy9hc3NldHNcIik7XHJcbmNvbnNvbGUubG9nKGdsb2JhbC5DTElFTlRfRElTKTtcclxuZ2xvYmFsLlNFUlZFUl9ESVMgPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lKTtcclxuY29uc29sZS5sb2coZ2xvYmFsLlNFUlZFUl9ESVMpO1xyXG5nbG9iYWwuREJfRElTID0gcGF0aC5yZXNvbHZlKGdsb2JhbC5TRVJWRVJfRElTLFwiZGF0YWJhc2UvanNvblwiKTtcclxuY29uc29sZS5sb2coZ2xvYmFsLkRCX0RJUyk7XHJcblxyXG5cclxuaW1wb3J0IENyZWF0ZUh0dHAgZnJvbSBcIi4vaHR0cC9pbml0L29wZW4uanNcIjtcclxuXHJcbihuZXcgQ3JlYXRlSHR0cCgpKS5vcGVuKDExMTApO1xyXG5cclxuaW1wb3J0IGNyZWF0ZVNvY2tldCBmcm9tIFwiLi9zb2NrZXQvaW5pdC9vcGVuL29wZW4uanNcIjtcclxuY3JlYXRlU29ja2V0KDExMTEpOyJdLCJtYXBwaW5ncyI6Ijs7QUFHQTtBQUNBOzs7QUFZQTtBQUNBOzs7QUFHQTtBQUNBOzs7OztBQWpCQTs7Ozs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBRUE7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Created by Andy on 2017/2/8.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\nvar _url = __webpack_require__(8);\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _http = __webpack_require__(9);\n\nvar _http2 = _interopRequireDefault(_http);\n\nvar _fs = __webpack_require__(4);\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _path = __webpack_require__(2);\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _zlib = __webpack_require__(10);\n\nvar _zlib2 = _interopRequireDefault(_zlib);\n\nvar _log = __webpack_require__(3);\n\nvar _log2 = _interopRequireDefault(_log);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nvar CreateHttp = function () {\n    function CreateHttp() {\n        _classCallCheck(this, CreateHttp);\n\n        this.url = _url2.default;\n        this.http = _http2.default;\n        this.fs = _fs2.default;\n        this.path = _path2.default;\n        this.zlib = _zlib2.default;\n        this.log = _log2.default;\n    }\n\n    _createClass(CreateHttp, [{\n        key: "open",\n        value: function open(port) {\n            var that = this;\n            that.http.createServer(function (req, res) {\n                that.writeHead(req, res).response(req, res);\n            }).listen(port, function () {});\n        }\n    }, {\n        key: "writeHead",\n        value: function writeHead(req, res) {\n            var fileName = req.url.split("/").pop();\n            fileName = fileName ? fileName : "index.html";\n            var extension = fileName.split(".").pop();\n            var contentType = "text/html";\n            var contentEncoding = "gzip";\n            var useCache = true;\n\n            console.log("req.url: ", req.url);\n            switch (extension) {\n                case "css":\n                    contentType = "text/css";\n                    break;\n                case "html":\n                    contentType = "text/html";\n                    contentEncoding = null;\n                    useCache = false;\n                    break;\n                case "js":\n                    contentType = "application/javascript";\n                    break;\n                case "png":\n                case "jpg":\n                case "jpeg":\n                case "gif":\n                    contentType = "image/" + extension;\n                    contentEncoding = null;\n                    break;\n                case "ico":\n                    contentType = "image/" + extension;\n                    contentEncoding = null;\n                    useCache = false;\n                    break;\n                default:\n                    // ajax请求不会带后缀，默认就是请求json数据类型\n                    // 日后还会有xml数据类型\n                    contentType = "application/json";\n                    useCache = false;\n                    contentEncoding = null;\n                    break;\n            }\n\n            var headOption = {\n                "Content-Type": contentType\n            };\n            if (useCache) headOption["Cache-Control"] = "max-age=" + 30 * 24 * 60 * 60 * 1000;\n            if (contentEncoding) headOption["Content-Encoding"] = contentEncoding;\n\n            res.writeHead(200, headOption);\n\n            return this;\n        }\n    }, {\n        key: "response",\n        value: function response(req, res) {\n            var that = this;\n            var xRequestedWith = req.headers["x-requested-with"];\n            var extension = that.path.extname(req.url);\n            var gzipHandler = that.zlib.createGzip();\n\n            console.log("xRequestedWith: ", xRequestedWith);\n            if (req.url == "/") {\n                console.log("来自 ", req.headers["referer"], " 的请求");\n                //初始化客户端；\n                that.fs.readFile(that.path.join(SOURCES_DIS, req.url, "index.html"), function (err, chunk) {\n\n                    if (err) {\n                        that.log.error(err);\n                    } else {\n                        res.write(chunk.toString());\n                    }\n                    res.end();\n                });\n            }\n\n            if (extension) {\n                //CDN资源请求；      \n                var fileStream = null;\n                if (/\\.(png|jpg|jpeg|gif|ico)$/.test(extension)) {\n                    // 图片类型转换成“base64”输出\n                    fileStream = that.fs.createReadStream(that.path.join(SOURCES_DIS, req.url));\n                    fileStream.pipe(res);\n                } else {\n\n                    fileStream = that.fs.createReadStream(that.path.join(SOURCES_DIS, req.url));\n                    fileStream.pipe(gzipHandler).pipe(res);\n                }\n            }\n\n            // ajax请求：\n            if (xRequestedWith) {\n                // noinspection JSAnnotator\n                var upsetFinalData = function upsetFinalData(item, targetProp) {\n\n                    if (!Math.round(Math.random())) {\n                        if (item[targetProp] instanceof Array) {\n                            item[targetProp].length = 0;\n                        } else {\n                            item[targetProp] = {};\n                        }\n                    }\n\n                    return item;\n                };\n\n                req.on("data", function (data) {\n\n                    var ajaxData = new that.url.parse("?" + data.toString(), true).query;\n                    var filename = ajaxData.dataType + ".json";\n                    console.log("the db direct", that.path.join(DB_DIS, req.url, filename));\n                    that.fs.readFile(that.path.join(DB_DIS, req.url, filename), function (err, chunk) {\n                        if (err) {\n                            that.log.error(err);\n                        } else {\n\n                            var scannerData = JSON.parse(chunk.toString());\n                            var finalData = Object.assign(scannerData.items[ajaxData.index], { itemcount: scannerData.itemcount });\n                            res.write(JSON.stringify(upsetFinalData(finalData, "info")));\n                        }\n                        res.end();\n                    });\n                });\n            }\n\n            return this;\n        }\n    }]);\n\n    return CreateHttp;\n}();\n\nexports.default = CreateHttp;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9zZXJ2ZXIvaHR0cC9pbml0L29wZW4uanM/ODhhNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5IG9uIDIwMTcvMi84LlxyXG4gKi9cclxuXHJcbmltcG9ydCB1cmwgZnJvbSBcInVybFwiO1xyXG5pbXBvcnQgaHR0cCBmcm9tIFwiaHR0cFwiO1xyXG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XHJcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XHJcbmltcG9ydCB6bGliIGZyb20gXCJ6bGliXCI7XHJcbmltcG9ydCBsb2cgZnJvbSBcImxvZ1wiO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENyZWF0ZUh0dHAge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy51cmwgPSB1cmw7XHJcbiAgICAgICAgdGhpcy5odHRwID0gaHR0cDtcclxuICAgICAgICB0aGlzLmZzID0gZnM7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcclxuICAgICAgICB0aGlzLnpsaWIgPSB6bGliO1xyXG4gICAgICAgIHRoaXMubG9nID0gbG9nO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4ocG9ydCkge1xyXG4gICAgICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgICAgICB0aGF0Lmh0dHAuY3JlYXRlU2VydmVyKGZ1bmN0aW9uIChyZXEsIHJlcykge1xyXG4gICAgICAgICAgICB0aGF0LndyaXRlSGVhZChyZXEsIHJlcykucmVzcG9uc2UocmVxLCByZXMpO1xyXG4gICAgICAgIH0pLmxpc3Rlbihwb3J0LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgd3JpdGVIZWFkKHJlcSwgcmVzKSB7XHJcbiAgICAgICAgbGV0IGZpbGVOYW1lID0gcmVxLnVybC5zcGxpdChcIi9cIikucG9wKCk7XHJcbiAgICAgICAgZmlsZU5hbWUgPSBmaWxlTmFtZSA/IGZpbGVOYW1lIDogXCJpbmRleC5odG1sXCI7XHJcbiAgICAgICAgbGV0IGV4dGVuc2lvbiA9IGZpbGVOYW1lLnNwbGl0KFwiLlwiKS5wb3AoKTtcclxuICAgICAgICBsZXQgY29udGVudFR5cGUgPSBcInRleHQvaHRtbFwiO1xyXG4gICAgICAgIGxldCBjb250ZW50RW5jb2RpbmcgPSBcImd6aXBcIjtcclxuICAgICAgICBsZXQgdXNlQ2FjaGUgPSB0cnVlO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhcInJlcS51cmw6IFwiLHJlcS51cmwpO1xyXG4gICAgICAgIHN3aXRjaCAoZXh0ZW5zaW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJjc3NcIjpcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlID0gXCJ0ZXh0L2Nzc1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJodG1sXCI6XHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFwidGV4dC9odG1sXCI7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29udGVudEVuY29kaW5nID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHVzZUNhY2hlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImpzXCI6XHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFwiYXBwbGljYXRpb24vamF2YXNjcmlwdFwiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwbmdcIjpcclxuICAgICAgICAgICAgY2FzZSBcImpwZ1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwianBlZ1wiOlxyXG4gICAgICAgICAgICBjYXNlIFwiZ2lmXCI6XHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFwiaW1hZ2UvXCIgKyBleHRlbnNpb247ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29udGVudEVuY29kaW5nID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiaWNvXCI6XHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFwiaW1hZ2UvXCIgKyBleHRlbnNpb247ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29udGVudEVuY29kaW5nID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHVzZUNhY2hlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gYWpheOivt+axguS4jeS8muW4puWQjue8gO+8jOm7mOiupOWwseaYr+ivt+axgmpzb27mlbDmja7nsbvlnotcclxuICAgICAgICAgICAgLy8g5pel5ZCO6L+Y5Lya5pyJeG1s5pWw5o2u57G75Z6LXHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZSA9IFwiYXBwbGljYXRpb24vanNvblwiO1xyXG4gICAgICAgICAgICAgICAgdXNlQ2FjaGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRFbmNvZGluZyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBoZWFkT3B0aW9uID0ge1xyXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOmNvbnRlbnRUeXBlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZih1c2VDYWNoZSloZWFkT3B0aW9uW1wiQ2FjaGUtQ29udHJvbFwiXSA9IFwibWF4LWFnZT1cIiArIDMwKjI0KjYwKjYwKjEwMDA7XHJcbiAgICAgICAgaWYoY29udGVudEVuY29kaW5nKSBoZWFkT3B0aW9uW1wiQ29udGVudC1FbmNvZGluZ1wiXSA9IGNvbnRlbnRFbmNvZGluZzsgICAgICAgIFxyXG5cclxuICAgICAgICByZXMud3JpdGVIZWFkKDIwMCwgaGVhZE9wdGlvbik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc3BvbnNlKHJlcSwgcmVzKSB7XHJcbiAgICAgICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIGxldCB4UmVxdWVzdGVkV2l0aCA9IHJlcS5oZWFkZXJzW1wieC1yZXF1ZXN0ZWQtd2l0aFwiXTtcclxuICAgICAgICBsZXQgZXh0ZW5zaW9uID0gdGhhdC5wYXRoLmV4dG5hbWUocmVxLnVybCk7XHJcbiAgICAgICAgbGV0IGd6aXBIYW5kbGVyID0gdGhhdC56bGliLmNyZWF0ZUd6aXAoKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ4UmVxdWVzdGVkV2l0aDogXCIseFJlcXVlc3RlZFdpdGgpO1xyXG4gICAgICAgIGlmIChyZXEudXJsID09IFwiL1wiKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5p2l6IeqIFwiLCByZXEuaGVhZGVyc1tcInJlZmVyZXJcIl0sIFwiIOeahOivt+axglwiKTtcclxuICAgICAgICAgICAgLy/liJ3lp4vljJblrqLmiLfnq6/vvJtcclxuICAgICAgICAgICAgdGhhdC5mcy5yZWFkRmlsZSh0aGF0LnBhdGguam9pbihTT1VSQ0VTX0RJUywgcmVxLnVybCwgXCJpbmRleC5odG1sXCIpLCBmdW5jdGlvbiAoZXJyLCBjaHVuaykge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGF0LmxvZy5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXMud3JpdGUoY2h1bmsudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXMuZW5kKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9IFxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChleHRlbnNpb24pIHtcclxuICAgICAgICAgICAgLy9DRE7otYTmupDor7fmsYLvvJsgICAgICBcclxuICAgICAgICAgICAgbGV0IGZpbGVTdHJlYW0gPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoL1xcLihwbmd8anBnfGpwZWd8Z2lmfGljbykkLy50ZXN0KGV4dGVuc2lvbikpIHtcclxuICAgICAgICAgICAgICAgIC8vIOWbvueJh+exu+Wei+i9rOaNouaIkOKAnGJhc2U2NOKAnei+k+WHulxyXG4gICAgICAgICAgICAgICAgZmlsZVN0cmVhbSA9IHRoYXQuZnMuY3JlYXRlUmVhZFN0cmVhbSh0aGF0LnBhdGguam9pbihTT1VSQ0VTX0RJUywgcmVxLnVybCkpOyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZmlsZVN0cmVhbS5waXBlKHJlcyk7XHJcblxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICBmaWxlU3RyZWFtID0gdGhhdC5mcy5jcmVhdGVSZWFkU3RyZWFtKHRoYXQucGF0aC5qb2luKFNPVVJDRVNfRElTLCByZXEudXJsKSk7XHJcbiAgICAgICAgICAgICAgICBmaWxlU3RyZWFtLnBpcGUoZ3ppcEhhbmRsZXIpLnBpcGUocmVzKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICAvLyBhamF46K+35rGC77yaXHJcbiAgICAgICAgaWYgKHhSZXF1ZXN0ZWRXaXRoKSB7XHJcbiAgICAgICAgICAgIC8vIG5vaW5zcGVjdGlvbiBKU0Fubm90YXRvclxyXG4gICAgICAgICAgICBmdW5jdGlvbiB1cHNldEZpbmFsRGF0YShpdGVtLCB0YXJnZXRQcm9wKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bdGFyZ2V0UHJvcF0gaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtW3RhcmdldFByb3BdLmxlbmd0aCA9IDBcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtW3RhcmdldFByb3BdID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgcmVxLm9uKFwiZGF0YVwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBhamF4RGF0YSA9IG5ldyB0aGF0LnVybC5wYXJzZShcIj9cIiArIGRhdGEudG9TdHJpbmcoKSwgdHJ1ZSkucXVlcnk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsZW5hbWUgPSBhamF4RGF0YS5kYXRhVHlwZSArIFwiLmpzb25cIjtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidGhlIGRiIGRpcmVjdFwiLHRoYXQucGF0aC5qb2luKERCX0RJUywgcmVxLnVybCwgZmlsZW5hbWUpKTtcclxuICAgICAgICAgICAgICAgIHRoYXQuZnMucmVhZEZpbGUodGhhdC5wYXRoLmpvaW4oREJfRElTLCByZXEudXJsLCBmaWxlbmFtZSksIGZ1bmN0aW9uIChlcnIsIGNodW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZXJyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5sb2cuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2V7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2Nhbm5lckRhdGEgPSBKU09OLnBhcnNlKGNodW5rLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmluYWxEYXRhID0gT2JqZWN0LmFzc2lnbihzY2FubmVyRGF0YS5pdGVtc1thamF4RGF0YS5pbmRleF0sIHtpdGVtY291bnQ6IHNjYW5uZXJEYXRhLml0ZW1jb3VudH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMud3JpdGUoSlNPTi5zdHJpbmdpZnkodXBzZXRGaW5hbERhdGEoZmluYWxEYXRhLCBcImluZm9cIikpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlcy5lbmQoKTsgICBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOzs7O0FBSUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTlCQTtBQUNBO0FBZ0NBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQXBKQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n')},function(module,exports){eval('module.exports = require("url");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcInVybFwiPzYxZTgiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwidXJsXCIpOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8\n')},function(module,exports){eval('module.exports = require("http");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImh0dHBcIj84ZDE5Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImh0dHBcIik7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n')},function(module,exports){eval('module.exports = require("zlib");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJ6bGliXCI/ZTU5MSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ6bGliXCIpOyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///10\n')},function(module,exports,__webpack_require__){"use strict";eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nexports.default = function (port) {\n    var netServer = __webpack_require__(12).createServer(function (socket) {\n        socket.on('error', function (e) {\n            _log2.default.error(e);\n        });\n        socket.on('data', function (e) {\n            var frame = _exports2.default.frameDecode(e);\n            //第一次握手\n            if (frame.FIN === 0) {\n                console.log(\"握手\");\n                (0, _shakehand2.default)(e, socket);\n            }\n            //数据交互\n            else {\n                    (0, _host2.default)(frame, socket);\n                }\n        });\n    }).listen(port, function () {});\n};\n\nvar _exports = __webpack_require__(5);\n\nvar _exports2 = _interopRequireDefault(_exports);\n\nvar _host = __webpack_require__(15);\n\nvar _host2 = _interopRequireDefault(_host);\n\nvar _shakehand = __webpack_require__(28);\n\nvar _shakehand2 = _interopRequireDefault(_shakehand);\n\nvar _log = __webpack_require__(3);\n\nvar _log2 = _interopRequireDefault(_log);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbml0L29wZW4vb3Blbi5qcz83YmM1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0b29sIGZyb20gXCJ3c1NlcnZlci9zZXJ2aWNlcy90b29sL2V4cG9ydHNcIjtcclxuaW1wb3J0IGhvc3QgZnJvbSBcIndzU2VydmVyL2ludGVyYWN0aXZlL2hvc3RcIjtcclxuaW1wb3J0IGhhbmRzaGFrZSBmcm9tIFwiLi8uLi9zaGFrZWhhbmQvc2hha2VoYW5kXCI7XHJcbmltcG9ydCBsb2cgZnJvbSBcImxvZ1wiO1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocG9ydCkge1xyXG4gICAgbGV0IG5ldFNlcnZlciA9IHJlcXVpcmUoJ25ldCcpLmNyZWF0ZVNlcnZlcihmdW5jdGlvbiAoc29ja2V0KSB7XHJcbiAgICAgICAgc29ja2V0Lm9uKCdlcnJvcicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGxvZy5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzb2NrZXQub24oJ2RhdGEnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBsZXQgZnJhbWUgPSB0b29sLmZyYW1lRGVjb2RlKGUpO1xyXG4gICAgICAgICAgICAvL+esrOS4gOasoeaPoeaJi1xyXG4gICAgICAgICAgICBpZiAoZnJhbWUuRklOID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaPoeaJi1wiKTtcclxuICAgICAgICAgICAgICAgIGhhbmRzaGFrZShlLCBzb2NrZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8v5pWw5o2u5Lqk5LqSXHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaG9zdChmcmFtZSwgc29ja2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pLmxpc3Rlbihwb3J0LCAoKSA9PiB7fSk7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBeEJBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n")},function(module,exports){eval('module.exports = require("net");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJuZXRcIj8yMWVkIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm5ldFwiKTsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///12\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (e) {\n    var s = [],\n        o = new Buffer(e.PayloadData),\n        l = o.length;\n    //输入第一个字节\n    s.push((e.FIN << 7) + e.Opcode);\n\n    //输入第二个字节，判断它的长度并放入相应的后续长度消息\n    //永远不使用掩码\n    if (l < 126) {\n        s.push(l);\n    } else if (l < 0x10000) {\n        s.push(126, (l & 0xFF00) >> 8, l & 0xFF);\n    } else {\n        //8字节数据，前4字节一般没用留空;\n\n        s.push(127, 0, 0, 0, 0, (l & 0xFF000000) >> 24, (l & 0xFF0000) >> 16, (l & 0xFF00) >> 8, l & 0xFF);\n    }\n\n    //返回头部分和数据部分的合并缓冲区\n    return Buffer.concat([new Buffer(s), o]);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9zZXJ2aWNlcy90b29sL3BheWxvYWQuY29tcGlsZXIvZnJhbWVFbmNvZGUuanM/N2JkYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5IG9uIDIwMTcvMTEvNC5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChlKSB7XHJcbiAgICB2YXIgcyA9IFtdLCBvID0gbmV3IEJ1ZmZlcihlLlBheWxvYWREYXRhKSwgbCA9IG8ubGVuZ3RoO1xyXG4gICAgLy/ovpPlhaXnrKzkuIDkuKrlrZfoioJcclxuICAgIHMucHVzaCgoZS5GSU4gPDwgNykgKyBlLk9wY29kZSk7XHJcblxyXG4gICAgLy/ovpPlhaXnrKzkuozkuKrlrZfoioLvvIzliKTmlq3lroPnmoTplb/luqblubbmlL7lhaXnm7jlupTnmoTlkI7nu63plb/luqbmtojmga9cclxuICAgIC8v5rC46L+c5LiN5L2/55So5o6p56CBXHJcbiAgICBpZiAobCA8IDEyNikge1xyXG4gICAgICAgIHMucHVzaChsKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGwgPCAweDEwMDAwKSB7XHJcbiAgICAgICAgcy5wdXNoKDEyNiwgKGwgJiAweEZGMDApID4+IDgsIGwgJiAweEZGKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIC8vOOWtl+iKguaVsOaNru+8jOWJjTTlrZfoioLkuIDoiKzmsqHnlKjnlZnnqbo7XHJcblxyXG4gICAgICAgIHMucHVzaCgxMjcsIDAsIDAsIDAsIDAsIChsICYgMHhGRjAwMDAwMCkgPj4gMjQsIChsICYgMHhGRjAwMDApID4+IDE2LCAobCAmIDB4RkYwMCkgPj4gOCwgbCAmIDB4RkYpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v6L+U5Zue5aS06YOo5YiG5ZKM5pWw5o2u6YOo5YiG55qE5ZCI5bm257yT5Yay5Yy6XHJcbiAgICByZXR1cm4gQnVmZmVyLmNvbmNhdChbbmV3IEJ1ZmZlcihzKSwgb10pO1xyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFHQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (e) {\n    var i = 0,\n        j = void 0,\n        s = void 0,\n        frame = {\n        //解析前两个字节的基本数据\n        FIN: e[i] >> 7, Opcode: e[i++] & 15, Mask: e[i] >> 7,\n        PayloadLength: e[i++] & 0x7F\n    };\n\n    if (frame.PayloadLength == 126) {\n        //处理特殊长度126和127\n        frame.PayloadLength = (e[i++] << 8) + e[i++];\n    }\n    if (frame.PayloadLength == 127) {\n        i += 4; //长度一般用四字节的整型，前四个字节通常为长整形留空的\n        frame.PayloadLength = (e[i++] << 24) + (e[i++] << 16) + (e[i++] << 8) + e[i++];\n    }\n    if (frame.Mask) {\n        //判断是否使用掩码\n        //获取掩码实体\n        frame.MaskingKey = [e[i++], e[i++], e[i++], e[i++]];\n        //对数据和掩码做异或运算\n        for (j = 0, s = []; j < frame.PayloadLength; j++) {\n            s.push(e[i + j] ^ frame.MaskingKey[j % 4]);\n        }\n    } else {\n        s = e.slice(i, frame.PayloadLength); //否则直接使用数据\n    }\n    //数组转换成缓冲区来使用\n    s = new Buffer(s);\n    //如果有必要则把缓冲区转换成字符串来使用\n    if (frame.Opcode == 1) {\n        s = s.toString();\n    }\n    //设置上数据部分\n    frame.PayloadData = s;\n    //返回数据帧\n    return frame;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9zZXJ2aWNlcy90b29sL3BheWxvYWQuY29tcGlsZXIvZnJhbWVEZWNvZGUuanM/OTAyOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5IG9uIDIwMTcvMTEvNC5cclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBsZXQgaSA9IDAsIGosIHMsIGZyYW1lID0ge1xyXG4gICAgICAgIC8v6Kej5p6Q5YmN5Lik5Liq5a2X6IqC55qE5Z+65pys5pWw5o2uXHJcbiAgICAgICAgRklOOiBlW2ldID4+IDcsIE9wY29kZTogZVtpKytdICYgMTUsIE1hc2s6IGVbaV0gPj4gNyxcclxuICAgICAgICBQYXlsb2FkTGVuZ3RoOiBlW2krK10gJiAweDdGXHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChmcmFtZS5QYXlsb2FkTGVuZ3RoID09IDEyNikgeyAgIC8v5aSE55CG54m55q6K6ZW/5bqmMTI25ZKMMTI3XHJcbiAgICAgICAgZnJhbWUuUGF5bG9hZExlbmd0aCA9IChlW2krK10gPDwgOCkgKyBlW2krK107XHJcbiAgICB9XHJcbiAgICBpZiAoZnJhbWUuUGF5bG9hZExlbmd0aCA9PSAxMjcpIHtcclxuICAgICAgICBpICs9IDQ7IC8v6ZW/5bqm5LiA6Iis55So5Zub5a2X6IqC55qE5pW05Z6L77yM5YmN5Zub5Liq5a2X6IqC6YCa5bi45Li66ZW/5pW05b2i55WZ56m655qEXHJcbiAgICAgICAgZnJhbWUuUGF5bG9hZExlbmd0aCA9IChlW2krK10gPDwgMjQpICsgKGVbaSsrXSA8PCAxNikgKyAoZVtpKytdIDw8IDgpICsgZVtpKytdO1xyXG4gICAgfVxyXG4gICAgaWYgKGZyYW1lLk1hc2spIHsvL+WIpOaWreaYr+WQpuS9v+eUqOaOqeeggVxyXG4gICAgICAgIC8v6I635Y+W5o6p56CB5a6e5L2TXHJcbiAgICAgICAgZnJhbWUuTWFza2luZ0tleSA9IFtlW2krK10sIGVbaSsrXSwgZVtpKytdLCBlW2krK11dO1xyXG4gICAgICAgIC8v5a+55pWw5o2u5ZKM5o6p56CB5YGa5byC5oiW6L+Q566XXHJcbiAgICAgICAgZm9yIChqID0gMCwgcyA9IFtdOyBqIDwgZnJhbWUuUGF5bG9hZExlbmd0aDsgaisrKVxyXG4gICAgICAgICAgICBzLnB1c2goZVtpICsgal0gXiBmcmFtZS5NYXNraW5nS2V5W2ogJSA0XSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBzID0gZS5zbGljZShpLCBmcmFtZS5QYXlsb2FkTGVuZ3RoKTsvL+WQpuWImeebtOaOpeS9v+eUqOaVsOaNrlxyXG4gICAgfVxyXG4gICAgLy/mlbDnu4TovazmjaLmiJDnvJPlhrLljLrmnaXkvb/nlKhcclxuICAgIHMgPSBuZXcgQnVmZmVyKHMpO1xyXG4gICAgLy/lpoLmnpzmnInlv4XopoHliJnmiornvJPlhrLljLrovazmjaLmiJDlrZfnrKbkuLLmnaXkvb/nlKhcclxuICAgIGlmIChmcmFtZS5PcGNvZGUgPT0gMSkge1xyXG4gICAgICAgIHMgPSBzLnRvU3RyaW5nKCk7XHJcbiAgICB9XHJcbiAgICAvL+iuvue9ruS4iuaVsOaNrumDqOWIhlxyXG4gICAgZnJhbWUuUGF5bG9hZERhdGEgPSBzO1xyXG4gICAgLy/ov5Tlm57mlbDmja7luKdcclxuICAgIHJldHVybiBmcmFtZTtcclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///14\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (frame, socket) {\n    switch (frame.Opcode) {\n        case 8:\n            var data = frame.PayloadData.slice(2).toString();\n            console.log("会话已经结束:", socket, data);\n            if (socket.uid) (0, _disconnectChanel2.default)(socket, data);\n            if (socket.uid) (0, _reduceUser2.default)(socket, data);\n            socket.end();\n            socket.destroy(); //删除断线的session，\n            break;\n        default:\n            _socketStorage2.default.setStorage("opcode", frame.Opcode);\n            var data = JSON.parse(frame.PayloadData.toString()) || "";\n            switch (data.port) {\n                case 0x00:\n                    (0, _heartBeat2.default)(socket, data);\n                    break;\n                case 0x01:\n                    //返回一個pass信號，並存儲用戶數據\n                    (0, _userRegister2.default)(socket, data);\n                    break;\n                case 0x02:\n                    //协助通道的询问\n                    (0, _connectAsk2.default)(socket, data);\n                    break;\n                case 0x03:\n                    //协助通道的应答\n                    (0, _connectAccept2.default)(socket, data);\n                    break;\n                case 0x04:\n                    (0, _connectReject2.default)(socket, data);\n                    break;\n                case 0x05:\n                    //远程协助交互通道\n                    (0, _interActivePassageway2.default)(socket, data);\n                    break;\n                case 0x06:\n                    break;\n                case 0x07:\n                    break;\n                case 0x08:\n                    (0, _charChanel2.default)(data);\n                    break;\n                case 0x09:\n                    //交接callbackID\n                    (0, _ajaxDataRegister2.default)(socket, data);\n                    break;\n                case 0x0A:\n                    //交接scroll坐标\n                    (0, _scrollCoordinate2.default)(socket, data);\n                    break;\n                case 0xFE:\n                    (0, _disconnectChanel2.default)(socket, data);\n                    break;\n                case 0xFF:\n                    //断开协助通道//关闭ws\n                    //that.close(data);\n                    //console.log("中断远程用户");\n                    break;\n                default:\n                    break;\n            }\n            break;\n    }\n};\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nvar _disconnectChanel = __webpack_require__(17);\n\nvar _disconnectChanel2 = _interopRequireDefault(_disconnectChanel);\n\nvar _reduceUser = __webpack_require__(18);\n\nvar _reduceUser2 = _interopRequireDefault(_reduceUser);\n\nvar _heartBeat = __webpack_require__(19);\n\nvar _heartBeat2 = _interopRequireDefault(_heartBeat);\n\nvar _userRegister = __webpack_require__(20);\n\nvar _userRegister2 = _interopRequireDefault(_userRegister);\n\nvar _connectAsk = __webpack_require__(21);\n\nvar _connectAsk2 = _interopRequireDefault(_connectAsk);\n\nvar _connectAccept = __webpack_require__(22);\n\nvar _connectAccept2 = _interopRequireDefault(_connectAccept);\n\nvar _connectReject = __webpack_require__(23);\n\nvar _connectReject2 = _interopRequireDefault(_connectReject);\n\nvar _interActivePassageway = __webpack_require__(24);\n\nvar _interActivePassageway2 = _interopRequireDefault(_interActivePassageway);\n\nvar _charChanel = __webpack_require__(25);\n\nvar _charChanel2 = _interopRequireDefault(_charChanel);\n\nvar _ajaxDataRegister = __webpack_require__(26);\n\nvar _ajaxDataRegister2 = _interopRequireDefault(_ajaxDataRegister);\n\nvar _scrollCoordinate = __webpack_require__(27);\n\nvar _scrollCoordinate2 = _interopRequireDefault(_scrollCoordinate);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n;\n/**\r\n * Created by Andy on 2017/3/14.\r\n *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbnRlcmFjdGl2ZS9ob3N0LmpzPzk5MmEiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFuZHkgb24gMjAxNy8zLzE0LlxyXG4gKi9cclxuaW1wb3J0IFRSIGZyb20gXCJ3c1NlcnZlci9zZXJ2aWNlcy9zb2NrZXQuc3RvcmFnZS9zb2NrZXRTdG9yYWdlXCI7XHJcbmltcG9ydCBkaXNjb25uZWN0Q2hhbmVsIGZyb20gXCIuL3Rhc2tzL2Rpc2Nvbm5lY3RDaGFuZWxcIjtcclxuaW1wb3J0IHJlZHVjZVVzZXIgZnJvbSBcIi4vdGFza3MvcmVkdWNlVXNlclwiO1xyXG5pbXBvcnQgaGVhcnRCZWF0IGZyb20gXCIuL3Rhc2tzL2hlYXJ0QmVhdFwiO1xyXG5pbXBvcnQgdXNlclJlZ2lzdGVyIGZyb20gXCIuL3Rhc2tzL3VzZXJSZWdpc3RlclwiO1xyXG5pbXBvcnQgY29ubmVjdEFzayBmcm9tIFwiLi90YXNrcy9jb25uZWN0QXNrXCI7XHJcbmltcG9ydCBjb25uZWN0QWNjZXB0IGZyb20gXCIuL3Rhc2tzL2Nvbm5lY3RBY2NlcHRcIjtcclxuaW1wb3J0IGNvbm5lY3RSZWplY3QgZnJvbSBcIi4vdGFza3MvY29ubmVjdFJlamVjdFwiO1xyXG5pbXBvcnQgaW50ZXJBY3RpdmVQYXNzYWdld2F5IGZyb20gXCIuL3Rhc2tzL2ludGVyQWN0aXZlUGFzc2FnZXdheVwiO1xyXG5pbXBvcnQgY2hhckNoYW5lbCBmcm9tIFwiLi90YXNrcy9jaGFyQ2hhbmVsXCI7XHJcbmltcG9ydCBhamF4RGF0YVJlZ2lzdGVyIGZyb20gXCIuL3Rhc2tzL2FqYXhEYXRhUmVnaXN0ZXJcIjtcclxuaW1wb3J0IHNjcm9sbENvb3JkaW5hdGUgZnJvbSBcIi4vdGFza3Mvc2Nyb2xsQ29vcmRpbmF0ZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGZyYW1lLCBzb2NrZXQpIHtcclxuICAgIHN3aXRjaCAoZnJhbWUuT3Bjb2RlKSB7XHJcbiAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGZyYW1lLlBheWxvYWREYXRhLnNsaWNlKDIpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5Lya6K+d5bey57uP57uT5p2fOlwiLCBzb2NrZXQsIGRhdGEpO1xyXG4gICAgICAgICAgICBpZihzb2NrZXQudWlkKWRpc2Nvbm5lY3RDaGFuZWwoc29ja2V0LCBkYXRhKTtcclxuICAgICAgICAgICAgaWYoc29ja2V0LnVpZClyZWR1Y2VVc2VyKHNvY2tldCwgZGF0YSk7XHJcbiAgICAgICAgICAgIHNvY2tldC5lbmQoKTtcclxuICAgICAgICAgICAgc29ja2V0LmRlc3Ryb3koKTsgICAvL+WIoOmZpOaWree6v+eahHNlc3Npb27vvIxcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdCA6XHJcbiAgICAgICAgICAgIFRSLnNldFN0b3JhZ2UoXCJvcGNvZGVcIixmcmFtZS5PcGNvZGUpO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoZnJhbWUuUGF5bG9hZERhdGEudG9TdHJpbmcoKSkgfHwgXCJcIjtcclxuICAgICAgICAgICAgc3dpdGNoIChkYXRhLnBvcnQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMHgwMDpcclxuICAgICAgICAgICAgICAgICAgICBoZWFydEJlYXQoc29ja2V0LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMHgwMTogLy/ov5Tlm57kuIDlgItwYXNz5L+h6Jmf77yM5Lim5a2Y5YSy55So5oi25pW45pOaXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlclJlZ2lzdGVyKHNvY2tldCwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDB4MDI6IC8v5Y2P5Yqp6YCa6YGT55qE6K+i6ZeuXHJcbiAgICAgICAgICAgICAgICAgICAgY29ubmVjdEFzayhzb2NrZXQsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAweDAzOiAvL+WNj+WKqemAmumBk+eahOW6lOetlFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3RBY2NlcHQoc29ja2V0LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMHgwNDpcclxuICAgICAgICAgICAgICAgICAgICBjb25uZWN0UmVqZWN0KHNvY2tldCwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDB4MDU6ICAgIC8v6L+c56iL5Y2P5Yqp5Lqk5LqS6YCa6YGTXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJBY3RpdmVQYXNzYWdld2F5KHNvY2tldCwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDB4MDY6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDB4MDc6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDB4MDg6XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhckNoYW5lbChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMHgwOTogIC8v5Lqk5o6lY2FsbGJhY2tJRFxyXG4gICAgICAgICAgICAgICAgICAgIGFqYXhEYXRhUmVnaXN0ZXIoc29ja2V0LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMHgwQTogIC8v5Lqk5o6lc2Nyb2xs5Z2Q5qCHXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQ29vcmRpbmF0ZShzb2NrZXQsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAweEZFOlxyXG4gICAgICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3RDaGFuZWwoc29ja2V0LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMHhGRjogLy/mlq3lvIDljY/liqnpgJrpgZMvL+WFs+mXrXdzXHJcbiAgICAgICAgICAgICAgICAgICAgLy90aGF0LmNsb3NlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCLkuK3mlq3ov5znqIvnlKjmiLdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0IDpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFpQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF4Q0E7QUEwQ0E7QUF0REE7QUF3REE7QUFDQTtBQXZFQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQTBEQTtBQXpFQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///15\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\n/**\r\n * Created by Andy on 2017/11/9.\r\n */\n\nvar StorageRegister = function () {\n    function StorageRegister() {\n        var inject = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, StorageRegister);\n\n        this.storage = inject;\n    }\n\n    _createClass(StorageRegister, [{\n        key: "getStorage",\n        value: function getStorage(name) {\n            return this.storage[name];\n        }\n    }, {\n        key: "setStorage",\n        value: function setStorage(itemName, innerProp, val) {\n            /* if (this.storage[itemName] instanceof Array) {\r\n                 val = prop;\r\n                 this.storage[itemName].push(val);\r\n             }\r\n             else */if (val === undefined) {\n                val = innerProp;\n                this.storage[itemName] = val;\n            } else {\n                this.storage[itemName][innerProp] = val;\n            }\n\n            return this;\n        }\n    }, {\n        key: "addStorage",\n        value: function addStorage(itemName, val) {\n            if (this.storage[itemName] instanceof Array) {\n                this.storage[itemName].push(val);\n            } else {\n                throw new Error("this storage isn\'t a Array!");\n            }\n            return this;\n        }\n    }, {\n        key: "delStorage",\n        value: function delStorage(name, val) {\n            if (this.storage[name] instanceof Array) {\n                var index = val;\n                this.storage[name].splice(index, 1);\n            } else {\n                delete this.storage[name][val];\n            }\n            return this;\n        }\n    }], [{\n        key: "version",\n        value: function version() {\n            console.log("v1.0");\n        }\n    }, {\n        key: "author",\n        value: function author() {\n            console.log("我不tell you~");\n        }\n    }]);\n\n    return StorageRegister;\n}();\n\nexports.default = StorageRegister;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vcHVibGljL3BsdWdpbi9TdG9yYWdlUmVnaXN0ZXIvU3RvcmFnZVJlZ2lzdGVyLmpzPzM1ZmQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keSBvbiAyMDE3LzExLzkuXHJcbiAqL1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RvcmFnZVJlZ2lzdGVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihpbmplY3QgPSB7fSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZSA9IGluamVjdDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTdG9yYWdlKG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yYWdlW25hbWVdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFN0b3JhZ2UoaXRlbU5hbWUsIGlubmVyUHJvcCwgdmFsKSB7XHJcbiAgICAgICAvKiBpZiAodGhpcy5zdG9yYWdlW2l0ZW1OYW1lXSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIHZhbCA9IHByb3A7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZVtpdGVtTmFtZV0ucHVzaCh2YWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlICovaWYodmFsID09PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICB2YWwgPSBpbm5lclByb3A7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZVtpdGVtTmFtZV0gPSB2YWw7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZVtpdGVtTmFtZV1baW5uZXJQcm9wXSA9IHZhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZFN0b3JhZ2UoaXRlbU5hbWUsIHZhbCl7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RvcmFnZVtpdGVtTmFtZV0gaW5zdGFuY2VvZiBBcnJheSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2VbaXRlbU5hbWVdLnB1c2godmFsKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidGhpcyBzdG9yYWdlIGlzbid0IGEgQXJyYXkhXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGRlbFN0b3JhZ2UobmFtZSwgdmFsKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RvcmFnZVtuYW1lXSBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHZhbDtcclxuICAgICAgICAgICAgdGhpcy5zdG9yYWdlW25hbWVdLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5zdG9yYWdlW25hbWVdW3ZhbF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyB2ZXJzaW9uKCl7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ2MS4wXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBhdXRob3IoKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIuaIkeS4jXRlbGwgeW91flwiKTtcclxuICAgIH1cclxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBOzs7O0FBSUE7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7Ozs7OztBQWxEQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///16\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (socket, data) {\n    var fromUid = socket.uid;\n    var clients = _socketStorage2.default.getStorage("clients");\n    var namesMap = _socketStorage2.default.getStorage("namesMap");\n    var remoteChanelMap = _socketStorage2.default.getStorage("remoteChanelMap") || [];\n    var askerUid = null;\n    var helperUid = null;\n\n    // 排查断开的用户，检查是否与其他用户有通讯\n    // 删除配对通道，并告知通信的另一端\n    remoteChanelMap.forEach(function (item, index) {\n        if (item.askerUid == fromUid || item.helperUid == fromUid) {\n\n            askerUid = item.askerUid;\n            helperUid = item.helperUid;\n            (0, _emitter2.default)(0xFF, {\n                remoteId: 0,\n                remoteChanelMap: _socketStorage2.default.delStorage("remoteChanelMap", index).getStorage("remoteChanelMap")\n            }, clients[askerUid == fromUid ? helperUid : askerUid]);\n        }\n    });\n\n    // 另行通知其他所有的用户 哪两个用户结束远程业务\n    // 解除用户列表中"busing"状态，使其可以被选取\n    namesMap.forEach(function (item) {\n        if (askerUid == item || helperUid == item) return;\n        (0, _emitter2.default)(0x07, {\n            remoteChanelMap: _socketStorage2.default.getStorage("remoteChanelMap")\n        }, clients[item]);\n    });\n};\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nvar _emitter = __webpack_require__(1);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n; /**\r\n   * Created by Andy on 2017/11/4.\r\n   *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbnRlcmFjdGl2ZS90YXNrcy9kaXNjb25uZWN0Q2hhbmVsLmpzP2FjZmYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keSBvbiAyMDE3LzExLzQuXHJcbiAqL1xyXG5cclxuaW1wb3J0IFRSIGZyb20gXCJ3c1NlcnZlci9zZXJ2aWNlcy9zb2NrZXQuc3RvcmFnZS9zb2NrZXRTdG9yYWdlXCI7XHJcbmltcG9ydCBlbWl0dGVyIGZyb20gXCIuLi8uLi9lbWl0dGVyL2VtaXR0ZXIuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChzb2NrZXQsIGRhdGEpIHtcclxuICAgIGxldCBmcm9tVWlkID0gc29ja2V0LnVpZDtcclxuICAgIGxldCBjbGllbnRzID0gVFIuZ2V0U3RvcmFnZShcImNsaWVudHNcIik7XHJcbiAgICBsZXQgbmFtZXNNYXAgPSBUUi5nZXRTdG9yYWdlKFwibmFtZXNNYXBcIik7XHJcbiAgICBsZXQgcmVtb3RlQ2hhbmVsTWFwID0gVFIuZ2V0U3RvcmFnZShcInJlbW90ZUNoYW5lbE1hcFwiKSB8fCBbXTtcclxuICAgIGxldCBhc2tlclVpZCA9IG51bGw7XHJcbiAgICBsZXQgaGVscGVyVWlkID0gbnVsbDtcclxuXHJcbiAgICAvLyDmjpLmn6Xmlq3lvIDnmoTnlKjmiLfvvIzmo4Dmn6XmmK/lkKbkuI7lhbbku5bnlKjmiLfmnInpgJrorq9cclxuICAgIC8vIOWIoOmZpOmFjeWvuemAmumBk++8jOW5tuWRiuefpemAmuS/oeeahOWPpuS4gOerr1xyXG4gICAgcmVtb3RlQ2hhbmVsTWFwLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGluZGV4KSB7XHJcbiAgICAgICAgaWYgKGl0ZW0uYXNrZXJVaWQgPT0gZnJvbVVpZCB8fCBpdGVtLmhlbHBlclVpZCA9PSBmcm9tVWlkKSB7XHJcblxyXG4gICAgICAgICAgICBhc2tlclVpZCA9IGl0ZW0uYXNrZXJVaWQ7XHJcbiAgICAgICAgICAgIGhlbHBlclVpZCA9IGl0ZW0uaGVscGVyVWlkO1xyXG4gICAgICAgICAgICBlbWl0dGVyKFxyXG4gICAgICAgICAgICAgICAgMHhGRixcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdGVJZDowLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlbW90ZUNoYW5lbE1hcDogVFIuZGVsU3RvcmFnZShcInJlbW90ZUNoYW5lbE1hcFwiLCBpbmRleCkuZ2V0U3RvcmFnZShcInJlbW90ZUNoYW5lbE1hcFwiKVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNsaWVudHNbKGFza2VyVWlkID09IGZyb21VaWQgPyBoZWxwZXJVaWQgOiBhc2tlclVpZCldXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8vIOWPpuihjOmAmuefpeWFtuS7luaJgOacieeahOeUqOaItyDlk6rkuKTkuKrnlKjmiLfnu5PmnZ/ov5znqIvkuJrliqFcclxuICAgIC8vIOino+mZpOeUqOaIt+WIl+ihqOS4rVwiYnVzaW5nXCLnirbmgIHvvIzkvb/lhbblj6/ku6XooqvpgInlj5ZcclxuICAgIG5hbWVzTWFwLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBpZiAoYXNrZXJVaWQgPT0gaXRlbSB8fCBoZWxwZXJVaWQgPT0gaXRlbSlyZXR1cm47XHJcbiAgICAgICAgZW1pdHRlcigweDA3LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZW1vdGVDaGFuZWxNYXA6IFRSLmdldFN0b3JhZ2UoXCJyZW1vdGVDaGFuZWxNYXBcIilcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xpZW50c1tpdGVtXVxyXG4gICAgICAgICk7XHJcbiAgICB9KTtcclxufTsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUZBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBREE7QUFLQTtBQUNBO0FBQ0E7QUExQ0E7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUF1Q0E7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///17\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (socket) {\n\n    var namesMap = _socketStorage2.default.getStorage("namesMap");\n    var clients = _socketStorage2.default.getStorage("clients");\n    var deadUid = socket.uid;\n\n    if (deadUid) {\n\n        //删除断线的会话，\n        _socketStorage2.default.delStorage("clients", deadUid);\n\n        //删除断线的用户名，\n        var index = namesMap.indexOf(deadUid);\n        console.log("删除了用户：", namesMap[index]);\n        _socketStorage2.default.delStorage("namesMap", index);\n        console.log("删除之后剩余的用户：", _socketStorage2.default.getStorage("namesMap"));\n    }\n\n    //刷新用户列表到客户端\n    _socketStorage2.default.getStorage("namesMap").forEach(function (item, index) {\n        var clients = _socketStorage2.default.getStorage("clients");\n        (0, _emitter2.default)(0xFE, { deadUid: socket.uid }, clients[item]);\n    });\n};\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nvar _emitter = __webpack_require__(1);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n;\n\n//通知前端删除断开的用户\n/**\r\n * Created by Andy on 2017/11/4.\r\n *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbnRlcmFjdGl2ZS90YXNrcy9yZWR1Y2VVc2VyLmpzPzFiNWYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keSBvbiAyMDE3LzExLzQuXHJcbiAqL1xyXG5cclxuaW1wb3J0IFRSIGZyb20gXCJ3c1NlcnZlci9zZXJ2aWNlcy9zb2NrZXQuc3RvcmFnZS9zb2NrZXRTdG9yYWdlXCI7XHJcbmltcG9ydCBlbWl0dGVyIGZyb20gXCIuLi8uLi9lbWl0dGVyL2VtaXR0ZXIuanNcIjtcclxuXHJcbi8v6YCa55+l5YmN56uv5Yig6Zmk5pat5byA55qE55So5oi3XHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChzb2NrZXQpIHtcclxuXHJcbiAgICBsZXQgbmFtZXNNYXAgPSBUUi5nZXRTdG9yYWdlKFwibmFtZXNNYXBcIik7XHJcbiAgICBsZXQgY2xpZW50cyA9IFRSLmdldFN0b3JhZ2UoXCJjbGllbnRzXCIpO1xyXG4gICAgbGV0IGRlYWRVaWQgPSBzb2NrZXQudWlkO1xyXG5cclxuICAgIGlmIChkZWFkVWlkKSB7XHJcblxyXG4gICAgICAgIC8v5Yig6Zmk5pat57q/55qE5Lya6K+d77yMXHJcbiAgICAgICAgVFIuZGVsU3RvcmFnZShcImNsaWVudHNcIixkZWFkVWlkKTtcclxuXHJcbiAgICAgICAgLy/liKDpmaTmlq3nur/nmoTnlKjmiLflkI3vvIxcclxuICAgICAgICBsZXQgaW5kZXggPSBuYW1lc01hcC5pbmRleE9mKGRlYWRVaWQpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwi5Yig6Zmk5LqG55So5oi377yaXCIsbmFtZXNNYXBbaW5kZXhdKTtcclxuICAgICAgICBUUi5kZWxTdG9yYWdlKFwibmFtZXNNYXBcIixpbmRleCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCLliKDpmaTkuYvlkI7liankvZnnmoTnlKjmiLfvvJpcIixUUi5nZXRTdG9yYWdlKFwibmFtZXNNYXBcIikpO1xyXG4gICAgfVxyXG5cclxuICAgIC8v5Yi35paw55So5oi35YiX6KGo5Yiw5a6i5oi356uvXHJcbiAgICBUUi5nZXRTdG9yYWdlKFwibmFtZXNNYXBcIikuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSwgaW5kZXgpIHtcclxuICAgICAgICBsZXQgY2xpZW50cyA9IFRSLmdldFN0b3JhZ2UoXCJjbGllbnRzXCIpO1xyXG4gICAgICAgIGVtaXR0ZXIoMHhGRSwge2RlYWRVaWQ6IHNvY2tldC51aWR9LCBjbGllbnRzW2l0ZW1dKTtcclxuICAgIH0pO1xyXG5cclxufTsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBN0JBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7O0FBMEJBO0FBQ0E7QUExQkE7QUFQQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///18\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (socket, data) {\n    setTimeout(function () {\n        (0, _emitter2.default)(0x00, { fin: "1" }, socket);\n    }, 5 * 60 * 1000); //5分鐘一次心跳\n};\n\nvar _emitter = __webpack_require__(1);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * Created by Andy on 2017/11/4.\r\n */\n\n;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbnRlcmFjdGl2ZS90YXNrcy9oZWFydEJlYXQuanM/M2EyZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5IG9uIDIwMTcvMTEvNC5cclxuICovXHJcblxyXG5pbXBvcnQgZW1pdHRlciBmcm9tIFwiLi4vLi4vZW1pdHRlci9lbWl0dGVyLmpzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChzb2NrZXQsIGRhdGEpIHtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICBlbWl0dGVyKDB4MDAsIHtmaW46XCIxXCJ9LCBzb2NrZXQpO1xyXG4gICAgfSw1ICogNjAgKjEwMDApOyAvLzXliIbpkJjkuIDmrKHlv4Pot7NcclxufTsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBQ0E7Ozs7O0FBTEE7Ozs7QUFTQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///19\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (socket, data) {\n    socket.uid = data.uid;\n    _log2.default.user(data.uid, socket.remoteAddress + ":" + socket.remotePort);\n    var namesMap = _socketStorage2.default.getStorage("namesMap");\n    var clients = _socketStorage2.default.getStorage("clients");\n\n    if (namesMap.indexOf(data.uid) < 0) {\n        _socketStorage2.default.addStorage("namesMap", data.uid);\n        _socketStorage2.default.setStorage("clients", data.uid, socket);\n\n        // 向所有的用户推送用户名\n        // 不过要把包含用户目标的名字去掉\n        _socketStorage2.default.getStorage("namesMap").forEach(function (item, index) {\n            var curNamesMap = Array.prototype.slice.call(_socketStorage2.default.getStorage("namesMap"));\n            curNamesMap.splice(curNamesMap.indexOf(item), 1);\n            var remoteChanelMap = _socketStorage2.default.getStorage("remoteChanelMap") || [];\n            var curClients = _socketStorage2.default.getStorage("clients"); // 由于前面有操作，在推送之前重新获取\n            (0, _emitter2.default)(0x01, { namesMap: curNamesMap, "regPass": true, clientData: data, remoteChanelMap: remoteChanelMap }, curClients[item]);\n        });\n    } else {\n        (0, _emitter2.default)(0x01, { namesMap: [], "regPass": false, clientData: data }, socket); //用戶名已經被注冊\n    }\n};\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nvar _emitter = __webpack_require__(1);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nvar _log = __webpack_require__(3);\n\nvar _log2 = _interopRequireDefault(_log);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * Created by Andy on 2017/11/4.\r\n */\n\n;\n// 绑定用户信息//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbnRlcmFjdGl2ZS90YXNrcy91c2VyUmVnaXN0ZXIuanM/ZDFlMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5IG9uIDIwMTcvMTEvNC5cclxuICovXHJcblxyXG5pbXBvcnQgVFIgZnJvbSBcIndzU2VydmVyL3NlcnZpY2VzL3NvY2tldC5zdG9yYWdlL3NvY2tldFN0b3JhZ2VcIjtcclxuaW1wb3J0IGVtaXR0ZXIgZnJvbSBcIi4uLy4uL2VtaXR0ZXIvZW1pdHRlci5qc1wiO1xyXG5pbXBvcnQgbG9nIGZyb20gXCJsb2dcIjtcclxuLy8g57uR5a6a55So5oi35L+h5oGvXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChzb2NrZXQsIGRhdGEpIHtcclxuICAgIHNvY2tldC51aWQgPSBkYXRhLnVpZDtcclxuICAgIGxvZy51c2VyKGRhdGEudWlkLCBgJHtzb2NrZXQucmVtb3RlQWRkcmVzc306JHtzb2NrZXQucmVtb3RlUG9ydH1gKTtcclxuICAgIGxldCBuYW1lc01hcCA9IFRSLmdldFN0b3JhZ2UoXCJuYW1lc01hcFwiKTtcclxuICAgIGxldCBjbGllbnRzID0gVFIuZ2V0U3RvcmFnZShcImNsaWVudHNcIik7XHJcblxyXG4gICAgaWYgKG5hbWVzTWFwLmluZGV4T2YoZGF0YS51aWQpIDwgMCkge1xyXG4gICAgICAgIFRSLmFkZFN0b3JhZ2UoXCJuYW1lc01hcFwiLCBkYXRhLnVpZCk7XHJcbiAgICAgICAgVFIuc2V0U3RvcmFnZShcImNsaWVudHNcIiwgZGF0YS51aWQsIHNvY2tldCk7XHJcblxyXG4gICAgICAgIC8vIOWQkeaJgOacieeahOeUqOaIt+aOqOmAgeeUqOaIt+WQjVxyXG4gICAgICAgIC8vIOS4jei/h+imgeaKiuWMheWQq+eUqOaIt+ebruagh+eahOWQjeWtl+WOu+aOiVxyXG4gICAgICAgIFRSLmdldFN0b3JhZ2UoXCJuYW1lc01hcFwiKS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpbmRleCkge1xyXG4gICAgICAgICAgICBsZXQgY3VyTmFtZXNNYXAgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChUUi5nZXRTdG9yYWdlKFwibmFtZXNNYXBcIikpO1xyXG4gICAgICAgICAgICBjdXJOYW1lc01hcC5zcGxpY2UoY3VyTmFtZXNNYXAuaW5kZXhPZihpdGVtKSwgMSk7XHJcbiAgICAgICAgICAgIGxldCByZW1vdGVDaGFuZWxNYXAgPSBUUi5nZXRTdG9yYWdlKFwicmVtb3RlQ2hhbmVsTWFwXCIpIHx8IFtdO1xyXG4gICAgICAgICAgICBsZXQgY3VyQ2xpZW50cyA9IFRSLmdldFN0b3JhZ2UoXCJjbGllbnRzXCIpOyAvLyDnlLHkuo7liY3pnaLmnInmk43kvZzvvIzlnKjmjqjpgIHkuYvliY3ph43mlrDojrflj5ZcclxuICAgICAgICAgICAgZW1pdHRlcigweDAxLCB7bmFtZXNNYXA6IGN1ck5hbWVzTWFwLCBcInJlZ1Bhc3NcIjogdHJ1ZSwgY2xpZW50RGF0YTogZGF0YSwgcmVtb3RlQ2hhbmVsTWFwOnJlbW90ZUNoYW5lbE1hcH0sIGN1ckNsaWVudHNbaXRlbV0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1lbHNle1xyXG4gICAgICAgIGVtaXR0ZXIoMHgwMSwge25hbWVzTWFwOiBbXSwgXCJyZWdQYXNzXCI6IGZhbHNlLCBjbGllbnREYXRhOiBkYXRhfSwgc29ja2V0KTsgICAgLy/nlKjmiLblkI3lt7LntpPooqvms6jlhopcclxuICAgIH1cclxufTsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTVCQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQVBBOzs7O0FBK0JBO0FBeEJBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///20\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (socket, data) {\n    var clients = _socketStorage2.default.getStorage("clients");\n    var helper = clients[data.remoteUid.helperUid];\n    (0, _emitter2.default)(0x02, {\n        uiHref: data.items.uiHref,\n        remoteUid: {\n            askerUid: data.remoteUid.askerUid,\n            helperUid: data.remoteUid.helperUid\n        }\n    }, helper);\n};\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nvar _emitter = __webpack_require__(1);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n;\n\n// Զ������ѯ�ʣ���ѯ����Ϣ�Ƹ�Э����\n/**\r\n * Created by Andy on 2017/11/4.\r\n *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbnRlcmFjdGl2ZS90YXNrcy9jb25uZWN0QXNrLmpzPzM5MmYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keSBvbiAyMDE3LzExLzQuXHJcbiAqL1xyXG5cclxuaW1wb3J0IFRSIGZyb20gXCJ3c1NlcnZlci9zZXJ2aWNlcy9zb2NrZXQuc3RvcmFnZS9zb2NrZXRTdG9yYWdlXCI7XHJcbmltcG9ydCBlbWl0dGVyIGZyb20gXCIuLi8uLi9lbWl0dGVyL2VtaXR0ZXIuanNcIjtcclxuXHJcbi8vINS277+977+977+977+977+977+90a/vv73Ko++/ve+/ve+/vdGv77+977+977+977+9z6Lvv73GuO+/vdCt77+977+977+977+9XHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChzb2NrZXQsIGRhdGEpIHtcclxuICAgIGxldCBjbGllbnRzID0gVFIuZ2V0U3RvcmFnZShcImNsaWVudHNcIik7XHJcbiAgICBsZXQgaGVscGVyID0gY2xpZW50c1tkYXRhLnJlbW90ZVVpZC5oZWxwZXJVaWRdO1xyXG4gICAgZW1pdHRlcihcclxuICAgICAgICAweDAyLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdWlIcmVmOmRhdGEuaXRlbXMudWlIcmVmLFxyXG4gICAgICAgICAgICByZW1vdGVVaWQ6IHtcclxuICAgICAgICAgICAgICAgIGFza2VyVWlkOiBkYXRhLnJlbW90ZVVpZC5hc2tlclVpZCxcclxuICAgICAgICAgICAgICAgIGhlbHBlclVpZDogZGF0YS5yZW1vdGVVaWQuaGVscGVyVWlkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGhlbHBlclxyXG4gICAgKTtcclxufTtcclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFGQTtBQVNBO0FBQ0E7QUFuQkE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFnQkE7QUFDQTtBQWhCQTtBQVBBOztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///21\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (socket, data) {\n\n    var namesMap = _socketStorage2.default.getStorage("namesMap");\n    var clients = _socketStorage2.default.getStorage("clients");\n\n    var askerUid = data.remoteUid.askerUid;\n    var helperUid = data.remoteUid.helperUid;\n\n    // 存储远程业务中的两端，主要用于在用户未注册的时候，一口气把所有通道发给前端，让前端自己处理\n    _socketStorage2.default.addStorage("remoteChanelMap", { "askerUid": askerUid, "helperUid": helperUid });\n\n    // 通知所有的用户哪两个用户正在进行远程业务\n    namesMap.forEach(function (item) {\n        if (askerUid == item || helperUid == item) return;\n        (0, _emitter2.default)(0x06, {\n            remoteChanel: { "askerUid": askerUid, "helperUid": helperUid }\n        }, clients[item]);\n    });\n\n    var asker = clients[askerUid];\n    var helper = clients[helperUid];\n\n    // 给通讯中的用户派发身份标识 （求助者ID：1，协助者ID：2）\n    (0, _emitter2.default)(0x03, { remoteId: 1, remoteUid: {\n            "askerUid": askerUid,\n            "helperUid": helperUid\n        } }, asker);\n\n    (0, _emitter2.default)(0x03, { remoteId: 2, remoteUid: {\n            "askerUid": askerUid,\n            "helperUid": helperUid\n        } }, helper);\n};\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nvar _emitter = __webpack_require__(1);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n; /**\r\n   * Created by Andy on 2017/11/4.\r\n   *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbnRlcmFjdGl2ZS90YXNrcy9jb25uZWN0QWNjZXB0LmpzPzg5MWEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keSBvbiAyMDE3LzExLzQuXHJcbiAqL1xyXG5pbXBvcnQgVFIgZnJvbSBcIndzU2VydmVyL3NlcnZpY2VzL3NvY2tldC5zdG9yYWdlL3NvY2tldFN0b3JhZ2VcIjtcclxuaW1wb3J0IGVtaXR0ZXIgZnJvbSBcIi4uLy4uL2VtaXR0ZXIvZW1pdHRlci5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHNvY2tldCwgZGF0YSkge1xyXG5cclxuICAgIGxldCBuYW1lc01hcCA9IFRSLmdldFN0b3JhZ2UoXCJuYW1lc01hcFwiKTtcclxuICAgIGxldCBjbGllbnRzID0gVFIuZ2V0U3RvcmFnZShcImNsaWVudHNcIik7XHJcblxyXG4gICAgbGV0IGFza2VyVWlkID0gZGF0YS5yZW1vdGVVaWQuYXNrZXJVaWQ7XHJcbiAgICBsZXQgaGVscGVyVWlkID0gZGF0YS5yZW1vdGVVaWQuaGVscGVyVWlkO1xyXG5cclxuICAgIC8vIOWtmOWCqOi/nOeoi+S4muWKoeS4reeahOS4pOerr++8jOS4u+imgeeUqOS6juWcqOeUqOaIt+acquazqOWGjOeahOaXtuWAme+8jOS4gOWPo+awlOaKiuaJgOaciemAmumBk+WPkee7meWJjeerr++8jOiuqeWJjeerr+iHquW3seWkhOeQhlxyXG4gICAgVFIuYWRkU3RvcmFnZShcInJlbW90ZUNoYW5lbE1hcFwiLHtcImFza2VyVWlkXCI6IGFza2VyVWlkLCBcImhlbHBlclVpZFwiOiBoZWxwZXJVaWR9KTtcclxuXHJcbiAgICAvLyDpgJrnn6XmiYDmnInnmoTnlKjmiLflk6rkuKTkuKrnlKjmiLfmraPlnKjov5vooYzov5znqIvkuJrliqFcclxuICAgIG5hbWVzTWFwLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBpZiAoYXNrZXJVaWQgPT0gaXRlbSB8fCBoZWxwZXJVaWQgPT0gaXRlbSkgcmV0dXJuO1xyXG4gICAgICAgIGVtaXR0ZXIoMHgwNixcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVtb3RlQ2hhbmVsOiAge1wiYXNrZXJVaWRcIjogYXNrZXJVaWQsIFwiaGVscGVyVWlkXCI6IGhlbHBlclVpZH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xpZW50c1tpdGVtXVxyXG4gICAgICAgICk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgYXNrZXIgPSBjbGllbnRzW2Fza2VyVWlkXTtcclxuICAgIHZhciBoZWxwZXIgPSBjbGllbnRzW2hlbHBlclVpZF07XHJcblxyXG4gICAgLy8g57uZ6YCa6K6v5Lit55qE55So5oi35rS+5Y+R6Lqr5Lu95qCH6K+GIO+8iOaxguWKqeiAhUlE77yaMe+8jOWNj+WKqeiAhUlE77yaMu+8iVxyXG4gICAgZW1pdHRlcigweDAzLCB7cmVtb3RlSWQ6IDEscmVtb3RlVWlkOiB7XHJcbiAgICAgICAgXCJhc2tlclVpZFwiOiBhc2tlclVpZCxcclxuICAgICAgICBcImhlbHBlclVpZFwiOiBoZWxwZXJVaWRcclxuICAgIH19LCBhc2tlcik7XHJcblxyXG4gICAgZW1pdHRlcigweDAzLCB7cmVtb3RlSWQ6IDIscmVtb3RlVWlkOiB7XHJcbiAgICAgICAgXCJhc2tlclVpZFwiOiBhc2tlclVpZCxcclxuICAgICAgICBcImhlbHBlclVpZFwiOiBoZWxwZXJVaWRcclxuICAgIH19LCBoZWxwZXIpO1xyXG59OyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFEQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUF2Q0E7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFvQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///22\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (socket, data) {\n    var clients = _socketStorage2.default.getStorage("clients");\n    var helper = clients[data.remoteUid.helperUid];\n    (0, _emitter2.default)(0x02, {\n        uiHref: data.items.uiHref,\n        remoteUid: {\n            askerUid: data.remoteUid.askerUid,\n            helperUid: data.remoteUid.helperUid\n        }\n    }, helper);\n};\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nvar _emitter = __webpack_require__(1);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n;\n\n// 远程链接询问，把询问信息推给协助者\n/**\r\n * Created by Andy on 2017/11/4.\r\n *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbnRlcmFjdGl2ZS90YXNrcy9jb25uZWN0UmVqZWN0LmpzP2MyYzQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keSBvbiAyMDE3LzExLzQuXHJcbiAqL1xyXG5cclxuaW1wb3J0IFRSIGZyb20gXCJ3c1NlcnZlci9zZXJ2aWNlcy9zb2NrZXQuc3RvcmFnZS9zb2NrZXRTdG9yYWdlXCI7XHJcbmltcG9ydCBlbWl0dGVyIGZyb20gXCIuLi8uLi9lbWl0dGVyL2VtaXR0ZXIuanNcIjtcclxuXHJcbi8vIOi/nOeoi+mTvuaOpeivoumXru+8jOaKiuivoumXruS/oeaBr+aOqOe7meWNj+WKqeiAhVxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoc29ja2V0LCBkYXRhKSB7XHJcbiAgICBsZXQgY2xpZW50cyA9IFRSLmdldFN0b3JhZ2UoXCJjbGllbnRzXCIpO1xyXG4gICAgbGV0IGhlbHBlciA9IGNsaWVudHNbZGF0YS5yZW1vdGVVaWQuaGVscGVyVWlkXTtcclxuICAgIGVtaXR0ZXIoXHJcbiAgICAgICAgMHgwMixcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHVpSHJlZjpkYXRhLml0ZW1zLnVpSHJlZixcclxuICAgICAgICAgICAgcmVtb3RlVWlkOiB7XHJcbiAgICAgICAgICAgICAgICBhc2tlclVpZDogZGF0YS5yZW1vdGVVaWQuYXNrZXJVaWQsXHJcbiAgICAgICAgICAgICAgICBoZWxwZXJVaWQ6IGRhdGEucmVtb3RlVWlkLmhlbHBlclVpZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoZWxwZXJcclxuICAgICk7XHJcbn07XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBRkE7QUFTQTtBQUNBO0FBbkJBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7O0FBZ0JBO0FBQ0E7QUFoQkE7QUFQQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///23\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (socket, data) {\n\n    var clients = _socketStorage2.default.getStorage("clients");\n    var asker = clients[data.remoteUid.askerUid];\n    var helper = clients[data.remoteUid.helperUid];\n\n    if (data.remoteId == 1) {\n\n        // 求助者，接收的只有 点击事件\n        //emitter(0x05, data.items, helper);\n    } else if (data.remoteId == 2) {\n\n        // 协助者，接收的只有 ajax 数据\n        (0, _emitter2.default)(0x05, data.items, asker);\n    }\n};\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nvar _emitter = __webpack_require__(1);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n;\n\n//远程交互\n/**\r\n * Created by Andy on 2017/11/4.\r\n *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbnRlcmFjdGl2ZS90YXNrcy9pbnRlckFjdGl2ZVBhc3NhZ2V3YXkuanM/NGI2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5IG9uIDIwMTcvMTEvNC5cclxuICovXHJcbmltcG9ydCBUUiBmcm9tIFwid3NTZXJ2ZXIvc2VydmljZXMvc29ja2V0LnN0b3JhZ2Uvc29ja2V0U3RvcmFnZVwiO1xyXG5pbXBvcnQgZW1pdHRlciBmcm9tIFwiLi4vLi4vZW1pdHRlci9lbWl0dGVyLmpzXCI7XHJcblxyXG4vL+i/nOeoi+S6pOS6klxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoc29ja2V0LCBkYXRhKSB7XHJcblxyXG4gICAgbGV0IGNsaWVudHMgPSBUUi5nZXRTdG9yYWdlKFwiY2xpZW50c1wiKTtcclxuICAgIGxldCBhc2tlciA9IGNsaWVudHNbZGF0YS5yZW1vdGVVaWQuYXNrZXJVaWRdO1xyXG4gICAgbGV0IGhlbHBlciA9IGNsaWVudHNbZGF0YS5yZW1vdGVVaWQuaGVscGVyVWlkXTtcclxuXHJcbiAgICBpZiAoZGF0YS5yZW1vdGVJZCA9PSAxKSB7XHJcblxyXG4gICAgICAgIC8vIOaxguWKqeiAhe+8jOaOpeaUtueahOWPquaciSDngrnlh7vkuovku7ZcclxuICAgICAgICAvL2VtaXR0ZXIoMHgwNSwgZGF0YS5pdGVtcywgaGVscGVyKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGRhdGEucmVtb3RlSWQgPT0gMikge1xyXG5cclxuICAgICAgICAvLyDljY/liqnogIXvvIzmjqXmlLbnmoTlj6rmnIkgYWpheCDmlbDmja5cclxuICAgICAgICBlbWl0dGVyKDB4MDUsIGRhdGEuaXRlbXMsIGFza2VyKTtcclxuICAgIH1cclxufTsiXSwibWFwcGluZ3MiOiI7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFyQkE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFrQkE7QUFDQTtBQWxCQTtBQU5BOztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///24\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (data) {\n    var toWhom = data.items.oppositeName;\n    var fromWhom = data.items.nativeName;\n    var clients = _socketStorage2.default.getStorage("clients");\n    data.items.oppositeName = fromWhom;\n    data.items.nativeName = toWhom;\n\n    (0, _emitter2.default)(0x08, data.items, clients[toWhom]);\n    //  emitter(\n    //     0x08,\n    //     {\n    //         oppositeName: fromWhom\n    //       , nativeName: toWhom\n    //     },\n    //     clients[toWhom]\n    // );\n};\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nvar _emitter = __webpack_require__(1);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n;\n\n// 远程链接询问，把询问信息推给协助者\n/**\r\n * Created by Andy on 2018/1/6.\r\n *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbnRlcmFjdGl2ZS90YXNrcy9jaGFyQ2hhbmVsLmpzPzVjZWQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keSBvbiAyMDE4LzEvNi5cclxuICovXHJcbmltcG9ydCBUUiBmcm9tIFwid3NTZXJ2ZXIvc2VydmljZXMvc29ja2V0LnN0b3JhZ2Uvc29ja2V0U3RvcmFnZVwiO1xyXG5pbXBvcnQgZW1pdHRlciBmcm9tIFwiLi4vLi4vZW1pdHRlci9lbWl0dGVyLmpzXCI7XHJcblxyXG4vLyDov5znqIvpk77mjqXor6Lpl67vvIzmioror6Lpl67kv6Hmga/mjqjnu5nljY/liqnogIVcclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgIGxldCB0b1dob20gPSBkYXRhLml0ZW1zLm9wcG9zaXRlTmFtZTtcclxuICAgIGxldCBmcm9tV2hvbSA9IGRhdGEuaXRlbXMubmF0aXZlTmFtZTtcclxuICAgIGxldCBjbGllbnRzID0gVFIuZ2V0U3RvcmFnZShcImNsaWVudHNcIik7XHJcbiAgICBkYXRhLml0ZW1zLm9wcG9zaXRlTmFtZSA9IGZyb21XaG9tO1xyXG4gICAgZGF0YS5pdGVtcy5uYXRpdmVOYW1lID0gdG9XaG9tO1xyXG5cclxuICAgIGVtaXR0ZXIoXHJcbiAgICAgICAgMHgwOCxcclxuICAgICAgICBkYXRhLml0ZW1zLFxyXG4gICAgICAgIGNsaWVudHNbdG9XaG9tXVxyXG4gICAgKTtcclxuICAgIC8vICBlbWl0dGVyKFxyXG4gICAgLy8gICAgIDB4MDgsXHJcbiAgICAvLyAgICAge1xyXG4gICAgLy8gICAgICAgICBvcHBvc2l0ZU5hbWU6IGZyb21XaG9tXHJcbiAgICAvLyAgICAgICAsIG5hdGl2ZU5hbWU6IHRvV2hvbVxyXG4gICAgLy8gICAgIH0sXHJcbiAgICAvLyAgICAgY2xpZW50c1t0b1dob21dXHJcbiAgICAvLyApO1xyXG59O1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpCQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQXNCQTtBQUNBO0FBdEJBO0FBTkE7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///25\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (socket, data) {\n    var clients = _socketStorage2.default.getStorage("clients");\n    var helperUid = data.remoteUid.helperUid;\n    var askerUid = data.remoteUid.askerUid;\n    var fromUid = data.uid;\n\n    if (askerUid === fromUid) {\n        // 如果数据来自 asker，就存储，如果数据来自helper，就逐帧发送\n        ajaxDataCache.set(data.items.ajaxCallbackId, {\n            json: data.items.json,\n            ajaxCallbackId: data.items.ajaxCallbackId,\n            status: data.items.status\n        });\n    }\n\n    if (helperUid === fromUid) {\n        var doneId = data.items.doneId;\n        sniff(ajaxDataCache, doneId, 5, function () {\n\n            (0, _emitter2.default)(0x09, {\n                status: ajaxDataCache.get(doneId).status,\n                json: ajaxDataCache.get(doneId).json,\n                ajaxCallbackId: ajaxDataCache.get(doneId).ajaxCallbackId\n            }, clients[helperUid]);\n\n            // 发送完毕之后，清理；\n            ajaxDataCache.delete(doneId);\n        });\n    }\n};\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nvar _emitter = __webpack_require__(1);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * Created by Andy on 2018/1/10.\r\n */\nvar ajaxDataCache = new Map();\n\nfunction sniff(ajaxDataCache, doneId, times, callback) {\n\n    if (times <= 0) {\n        console.log("callbackId 未能及时上传~");\n        return;\n    }\n\n    var promise = new Promise(function (resolve, reject) {\n        setTimeout(function () {\n            var result = ajaxDataCache.get(doneId);\n            result ? resolve(result) : reject(result);\n        }, 500);\n    });\n\n    promise.then(callback, function () {\n        sniff(ajaxDataCache, doneId, --times, callback);\n    });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbnRlcmFjdGl2ZS90YXNrcy9hamF4RGF0YVJlZ2lzdGVyLmpzP2Y5NmEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keSBvbiAyMDE4LzEvMTAuXHJcbiAqL1xyXG5pbXBvcnQgVFIgZnJvbSBcIndzU2VydmVyL3NlcnZpY2VzL3NvY2tldC5zdG9yYWdlL3NvY2tldFN0b3JhZ2VcIjtcclxuaW1wb3J0IGVtaXR0ZXIgZnJvbSBcIi4uLy4uL2VtaXR0ZXIvZW1pdHRlci5qc1wiO1xyXG5cclxubGV0IGFqYXhEYXRhQ2FjaGUgPSBuZXcgTWFwKCk7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoc29ja2V0LCBkYXRhKSB7XHJcbiAgICBsZXQgY2xpZW50cyA9IFRSLmdldFN0b3JhZ2UoXCJjbGllbnRzXCIpO1xyXG4gICAgbGV0IGhlbHBlclVpZCA9IGRhdGEucmVtb3RlVWlkLmhlbHBlclVpZDtcclxuICAgIGxldCBhc2tlclVpZCA9IGRhdGEucmVtb3RlVWlkLmFza2VyVWlkO1xyXG4gICAgbGV0IGZyb21VaWQgPSBkYXRhLnVpZDtcclxuXHJcblxyXG4gICAgaWYgKGFza2VyVWlkID09PSBmcm9tVWlkKSB7XHJcbiAgICAgICAgLy8g5aaC5p6c5pWw5o2u5p2l6IeqIGFza2Vy77yM5bCx5a2Y5YKo77yM5aaC5p6c5pWw5o2u5p2l6IeqaGVscGVy77yM5bCx6YCQ5bin5Y+R6YCBXHJcbiAgICAgICAgYWpheERhdGFDYWNoZS5zZXQoZGF0YS5pdGVtcy5hamF4Q2FsbGJhY2tJZCwge1xyXG4gICAgICAgICAgICBqc29uOiBkYXRhLml0ZW1zLmpzb24sXHJcbiAgICAgICAgICAgIGFqYXhDYWxsYmFja0lkOiBkYXRhLml0ZW1zLmFqYXhDYWxsYmFja0lkLFxyXG4gICAgICAgICAgICBzdGF0dXM6IGRhdGEuaXRlbXMuc3RhdHVzXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBpZiAoaGVscGVyVWlkID09PSBmcm9tVWlkKSB7XHJcbiAgICAgICAgbGV0IGRvbmVJZCA9IGRhdGEuaXRlbXMuZG9uZUlkO1xyXG4gICAgICAgIHNuaWZmKGFqYXhEYXRhQ2FjaGUsIGRvbmVJZCwgNSwgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIGVtaXR0ZXIoMHgwOSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IGFqYXhEYXRhQ2FjaGUuZ2V0KGRvbmVJZCkuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGpzb246IGFqYXhEYXRhQ2FjaGUuZ2V0KGRvbmVJZCkuanNvbixcclxuICAgICAgICAgICAgICAgICAgICBhamF4Q2FsbGJhY2tJZDogYWpheERhdGFDYWNoZS5nZXQoZG9uZUlkKS5hamF4Q2FsbGJhY2tJZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNsaWVudHNbaGVscGVyVWlkXVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgLy8g5Y+R6YCB5a6M5q+V5LmL5ZCO77yM5riF55CG77ybXHJcbiAgICAgICAgICAgIGFqYXhEYXRhQ2FjaGUuZGVsZXRlKGRvbmVJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc25pZmYoYWpheERhdGFDYWNoZSwgZG9uZUlkLCB0aW1lcywgY2FsbGJhY2spIHtcclxuXHJcbiAgICBpZih0aW1lcyA8PSAwKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImNhbGxiYWNrSWQg5pyq6IO95Y+K5pe25LiK5LygflwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBhamF4RGF0YUNhY2hlLmdldChkb25lSWQpO1xyXG4gICAgICAgICAgICByZXN1bHQgPyByZXNvbHZlKHJlc3VsdCkgOiByZWplY3QocmVzdWx0KTtcclxuICAgICAgICB9LCA1MDApXHJcbiAgICB9KTtcclxuXHJcbiAgICBwcm9taXNlLnRoZW4oY2FsbGJhY2ssZnVuY3Rpb24oKXtcclxuICAgICAgICBzbmlmZihhamF4RGF0YUNhY2hlLCBkb25lSWQsIC0tdGltZXMsIGNhbGxiYWNrKVxyXG4gICAgfSlcclxufVxyXG5cclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUExQ0E7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7QUFMQTs7O0FBTUE7QUFDQTtBQXdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///26\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (socket, data) {\n    var clients = _socketStorage2.default.getStorage("clients");\n    var helperUid = data.remoteUid.helperUid;\n    var askerUid = data.remoteUid.askerUid;\n    var fromUid = data.uid;\n\n    if (helperUid === fromUid) {\n        (0, _emitter2.default)(0x0A, data.items, clients[askerUid]);\n    }\n};\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nvar _emitter = __webpack_require__(1);\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbnRlcmFjdGl2ZS90YXNrcy9zY3JvbGxDb29yZGluYXRlLmpzPzE0ZDAiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQW5keSBvbiAyMDE4LzEvMTMuXHJcbiAqL1xyXG5pbXBvcnQgVFIgZnJvbSBcIndzU2VydmVyL3NlcnZpY2VzL3NvY2tldC5zdG9yYWdlL3NvY2tldFN0b3JhZ2VcIjtcclxuaW1wb3J0IGVtaXR0ZXIgZnJvbSBcIi4uLy4uL2VtaXR0ZXIvZW1pdHRlci5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzb2NrZXQsIGRhdGEpe1xyXG4gICAgbGV0IGNsaWVudHMgPSBUUi5nZXRTdG9yYWdlKFwiY2xpZW50c1wiKTtcclxuICAgIGxldCBoZWxwZXJVaWQgPSBkYXRhLnJlbW90ZVVpZC5oZWxwZXJVaWQ7XHJcbiAgICBsZXQgYXNrZXJVaWQgPSBkYXRhLnJlbW90ZVVpZC5hc2tlclVpZDtcclxuICAgIGxldCBmcm9tVWlkID0gZGF0YS51aWQ7XHJcblxyXG4gICAgaWYoaGVscGVyVWlkID09PSBmcm9tVWlkKXtcclxuICAgICAgICBlbWl0dGVyKDB4MEEsZGF0YS5pdGVtcyxjbGllbnRzW2Fza2VyVWlkXSk7XHJcbiAgICB9XHJcbn0iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQUNBOzs7QUFBQTtBQUNBOzs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///27\n')},function(module,exports,__webpack_require__){"use strict";eval('\n\nObject.defineProperty(exports, "__esModule", {\n    value: true\n});\n\nexports.default = function (e, socket) {\n    var original = e.toString().match(/Sec-WebSocket-Key: (.+)/)[1];\n    var key = _crypto2.default.createHash("sha1").update(original + mask).digest("base64");\n    socket.write("HTTP/1.1 101 Switching Protocols\\r\\n");\n    socket.write("Upgrade:Websocket\\r\\n");\n    socket.write("Connection:Upgrade\\r\\n");\n    socket.write("Sec-WebSocket-Accept:" + key + "\\r\\n");\n    socket.write("\\r\\n");\n};\n\nvar _socketStorage = __webpack_require__(0);\n\nvar _socketStorage2 = _interopRequireDefault(_socketStorage);\n\nvar _crypto = __webpack_require__(29);\n\nvar _crypto2 = _interopRequireDefault(_crypto);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\r\n * Created by Andy on 2017/11/6.\r\n */\n\nvar mask = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";\n\n//单个用户的握手实例;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc2VydmVyL3NvY2tldC9pbml0L3NoYWtlaGFuZC9zaGFrZWhhbmQuanM/ZjdmOSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBbmR5IG9uIDIwMTcvMTEvNi5cclxuICovXHJcblxyXG5pbXBvcnQgVFIgZnJvbSBcIndzU2VydmVyL3NlcnZpY2VzL3NvY2tldC5zdG9yYWdlL3NvY2tldFN0b3JhZ2VcIjtcclxuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XHJcblxyXG5jb25zdCBtYXNrID0gXCIyNThFQUZBNS1FOTE0LTQ3REEtOTVDQS1DNUFCMERDODVCMTFcIjtcclxuXHJcbi8v5Y2V5Liq55So5oi355qE5o+h5omL5a6e5L6LO1xyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoZSwgc29ja2V0KSB7XHJcbiAgICBsZXQgb3JpZ2luYWwgPSBlLnRvU3RyaW5nKCkubWF0Y2goL1NlYy1XZWJTb2NrZXQtS2V5OiAoLispLylbMV07XHJcbiAgICBsZXQga2V5ID0gY3J5cHRvLmNyZWF0ZUhhc2goXCJzaGExXCIpLnVwZGF0ZShvcmlnaW5hbCArIG1hc2spLmRpZ2VzdChcImJhc2U2NFwiKTtcclxuICAgIHNvY2tldC53cml0ZShcIkhUVFAvMS4xIDEwMSBTd2l0Y2hpbmcgUHJvdG9jb2xzXFxyXFxuXCIpO1xyXG4gICAgc29ja2V0LndyaXRlKFwiVXBncmFkZTpXZWJzb2NrZXRcXHJcXG5cIik7XHJcbiAgICBzb2NrZXQud3JpdGUoXCJDb25uZWN0aW9uOlVwZ3JhZGVcXHJcXG5cIik7XHJcbiAgICBzb2NrZXQud3JpdGUoXCJTZWMtV2ViU29ja2V0LUFjY2VwdDpcIiArIGtleSArIFwiXFxyXFxuXCIpO1xyXG4gICAgc29ja2V0LndyaXRlKFwiXFxyXFxuXCIpO1xyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWZBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7O0FBTkE7Ozs7QUFPQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///28\n')},function(module,exports){eval('module.exports = require("crypto");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJjcnlwdG9cIj80Yzc2Il0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNyeXB0b1wiKTsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///29\n')}]);